import{K as S,m as E,r as v,j as e,L as A}from"./app-D81CliT5.js";import{S as D}from"./AdminLayout-DiBkyMyO.js";import{B as f}from"./button-gcQ0GUSx.js";import"./input-DwkB4HOX.js";import $ from"./BreadcrumbsHeader-BlJPi0bA.js";import{t as C,T as V}from"./index-BMM9kjq2.js";import{R as F}from"./constants-CEVnAm42.js";import{u as O}from"./useAppUrl-pHKvdS7f.js";import{I as T}from"./InputLabel-C7MjkWEc.js";import{D as g}from"./DropdownInputField-Ca38CNIx.js";import{I as r}from"./InputError-C1G7XCJH.js";import{I as h}from"./InputField-BwGmvoyD.js";import{S as B}from"./Section4--GkPcALf.js";import{I as j,a as _}from"./index-tPKdYM9I.js";import{R as N}from"./RadioGroup-IF3xGicA.js";import{S as P}from"./SelectField-DWmijfj2.js";import{T as Y}from"./textarea-1iPfJ-bl.js";import{R as I}from"./rotate-ccw-DBjrxkZi.js";import"./sidebar-BoAUmAq2.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-CCPwMpno.js";import"./index-CZBYw026.js";import"./floating-ui.react-dom-CqbO0hLn.js";import"./x-GIpbyFu4.js";import"./createLucideIcon-BSDB7QtE.js";import"./tooltip-I5AizP5E.js";import"./nav-user-DFgmB8A_.js";import"./avatar-B7RYlqfZ.js";import"./dropdown-menu-B2AXIRPO.js";import"./check-CMwsAFld.js";import"./chevron-right-DZRfUTGk.js";import"./stringFormat-Dx_XIxG1.js";import"./DeleteConfirmationModal-Cd8iZMFl.js";import"./file-text-ekKlpQIn.js";import"./users-round-CWIZIE0I.js";import"./heart-pulse-DFXrk-rr.js";import"./chevron-up-B8CiRrQ3.js";import"./breadcrumb-BA5PD1Ph.js";import"./iconBase-v49aA6A_.js";function Me({res_med_info:i}){const w=[{label:"Residents Information",showOnMobile:!1},{label:"Medical Information",href:route("medical.index"),showOnMobile:!1},{label:"Update Medical Information",showOnMobile:!0}];O();const m=S().props,y=(m==null?void 0:m.success)??null,x=(m==null?void 0:m.error)??null,{data:s,setData:n,post:k,errors:d,reset:R}=E({resident_id:"",resident_name:"",resident_image:null,birthdate:null,civil_status:"",sex:"",purok_number:"",medical_information_id:"",weight_kg:"",height_cm:"",bmi:"",nutrition_status:"",blood_type:"",emergency_contact_number:"",emergency_contact_name:"",emergency_contact_relationship:"",is_smoker:"0",is_alcohol_user:"0",has_philhealth:"0",philhealth_id_number:"",pwd_id_number:"",is_pwd:!1,disabilities:[],has_allergies:!1,allergies:[],has_medication:!1,medications:[],has_medical_condition:!1,medical_conditions:[],has_vaccination:!1,vaccinations:[]});v.useEffect(()=>{var a,t,l,c;i&&n({resident_id:i.resident_id??"",resident_name:`${i.resident.firstname} ${i.resident.middlename??""} ${i.resident.lastname}`.trim(),resident_image:i.resident.image??null,birthdate:i.resident.birthdate??null,civil_status:i.resident.civil_status??"",sex:i.resident.sex??"",purok_number:i.resident.purok_number??"",medical_information_id:i.id,weight_kg:i.weight_kg??"",height_cm:i.height_cm??"",bmi:i.bmi??"",nutrition_status:i.nutrition_status??"",blood_type:i.blood_type??"",emergency_contact_number:i.emergency_contact_number??"",emergency_contact_name:i.emergency_contact_name??"",emergency_contact_relationship:i.emergency_contact_relationship??"",is_smoker:i.is_smoker?"1":"0",is_alcohol_user:i.is_alcohol_user?"1":"0",has_philhealth:i.has_philhealth?"1":"0",philhealth_id_number:i.philhealth_id_number??"",pwd_id_number:i.pwd_id_number??null,is_pwd:i.pwd_id_number?"1":"0",disabilities:i.resident.disabilities??[],has_allergies:((a=i.resident.allergies)==null?void 0:a.length)>0?"1":"0",allergies:i.resident.allergies??[],has_medication:((t=i.resident.medications)==null?void 0:t.length)>0?"1":"0",medications:i.resident.medications??[],has_medical_condition:((l=i.resident.medical_conditions)==null?void 0:l.length)>0?"1":"0",medical_conditions:i.resident.medical_conditions??[],has_vaccination:((c=i.resident.vaccinations)==null?void 0:c.length)>0?"1":"0",vaccinations:i.resident.vaccinations??[],_method:"PUT"})},[i]);const M=a=>{a.preventDefault(),k(route("medical.update",s.medical_information_id),{onError:t=>{console.error("Validation Errors:",t)}})},o=(a,t,l,c)=>{const u=[...s[c]||[]];u[t]={...u[t],[l]:a.target.value},n(c,u)};v.useEffect(()=>{if(s.weight_kg>0&&s.height_cm>0){const a=s.height_cm/100,t=s.weight_kg/(a*a),l=t.toFixed(2);let c="";t<16?c="severly_underweight":t>=16&&t<18.5?c="underweight":t>=18.5&&t<25?c="normal":t>=25&&t<30?c="overweight":c="obese",n("bmi",l),n("nutrition_status",c)}else n("bmi",0),n("nutrition_status","")},[s.weight_kg,s.height_cm]);const p=(a,t={})=>{n(l=>({...l,[a]:[...l[a]||[],t]}))},b=(a,t)=>{n(l=>({...l,[a]:l[a].filter((c,u)=>u!==t)}))};return v.useEffect(()=>{y&&(handleModalClose(),C.success(y,{description:"Operation successful!",duration:3e3,closeButton:!0})),m.success=null},[y]),v.useEffect(()=>{x&&C.error(x,{description:"Operation failed!",duration:1e4,closeButton:!0}),m.error=null},[x]),e.jsxs(D,{children:[e.jsx(A,{title:"Medical Information"}),e.jsxs("div",{children:[e.jsx(V,{richColors:!0}),e.jsx($,{breadcrumbs:w}),e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 my-8",children:e.jsxs("div",{className:" my-2 p-5",children:[x&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:x}),e.jsx("div",{children:e.jsxs("form",{onSubmit:M,children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1",children:"Resident Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Search/Select the resident to add the medical information."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-y-2 md:gap-x-4 mb-5",children:[e.jsxs("div",{className:"md:row-span-2 flex flex-col items-center space-y-2",children:[e.jsx(T,{htmlFor:"resident_image",value:"Profile Photo"}),e.jsx("img",{src:s.resident_image?`/storage/${s.resident_image}`:"/images/default-avatar.jpg",alt:"Resident Image",className:"w-32 h-32 object-cover rounded-full border border-gray-200"})]}),e.jsxs("div",{className:"md:col-span-5 space-y-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(g,{label:"Full Name",name:"fullname",value:s.resident_name||"",placeholder:"Select a resident"}),e.jsx(r,{message:d.resident_id,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx("div",{children:e.jsx(h,{label:"Birthdate",name:"birthdate",value:s.birthdate||"",placeholder:"Select a resident",readOnly:!0})}),e.jsx("div",{children:e.jsx(h,{label:"Sex",name:"sex",value:F[s.sex||""],placeholder:"Select a resident",readOnly:!0})}),e.jsx("div",{children:e.jsx(h,{label:"Purok",name:"purok_number",value:s.purok_number||"",readOnly:!0})})]})]})]}),e.jsx(B,{data:s,setData:n,errors:d}),e.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-1 mt-8",children:"Related Medical Information"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Form below are options depending on the residents medical information."}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Allergies"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Do you have any allergies?",name:"has_medication",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_allergies||null,onChange:a=>n("has_allergies",a.target.value)})}),e.jsx("div",{children:s.has_allergies==1?e.jsxs(e.Fragment,{children:[s.allergies.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No allergy added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.allergies.map((a,t)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(g,{label:"Name of Allergy",name:"allergy_name",value:a.allergy_name||"",onChange:l=>o(l,t,"allergy_name","allergies"),placeholder:"Select or enter allergy"}),e.jsx(r,{message:d[`allergies.${t}.allergy_name`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 mt-4 ",children:"Allergy Reaction Description"}),e.jsx(Y,{name:"reaction_description",className:"bg-white border border-gray-400",value:a.reaction_description||"",onChange:l=>o(l,t,"reaction_description","allergies"),placeholder:"Enter description"}),e.jsx(r,{message:d[`allergies.${t}.reaction_description`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>b("allergies",t),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Allergy",children:e.jsx(j,{className:"text-2xl"})})]},t))}),e.jsxs("button",{type:"button",onClick:()=>p("allergies"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medication",children:[e.jsx(_,{className:"text-2xl"}),"Add Allergy"]})]}):s.has_medication==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No allergies declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Resident Medication"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Do you have any medications?",name:"has_medication",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_medication||null,onChange:a=>n("has_medication",a.target.value)})}),e.jsx("div",{children:s.has_medication==1?e.jsxs(e.Fragment,{children:[s.medications.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medication added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.medications.map((a,t)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(g,{label:"Medication Type",name:"medication",value:a.medication||"",onChange:l=>o(l,t,"medication","medications"),placeholder:"Select or enter medication"}),e.jsx(r,{message:d[`medications.${t}.medication`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Date Started",name:"start_date",type:"date",value:a.start_date||"",onChange:l=>o(l,t,"start_date","medications"),placeholder:"Enter quantity"}),e.jsx(r,{message:d[`medications.${t}.start_date`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Date Ended",name:"end_date",type:"date",value:a.end_date||"",onChange:l=>o(l,t,"end_date","medications"),placeholder:"Enter quantity"}),e.jsx(r,{message:d[`medications.${t}.end_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>b("medications",t),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Medicaton",children:e.jsx(j,{className:"text-2xl"})})]},t))}),e.jsxs("button",{type:"button",onClick:()=>p("medications"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medication",children:[e.jsx(_,{className:"text-2xl"}),"Add Medicaiton"]})]}):s.has_medication==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medication declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Resident Medical Condition"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Do you have any Medical Conditions?",name:"has_medical_condition",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_medical_condition||null,onChange:a=>n("has_medical_condition",a.target.value)})}),e.jsx("div",{children:s.has_medical_condition==1?e.jsxs(e.Fragment,{children:[s.medical_conditions.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medical condition added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.medical_conditions.map((a,t)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(g,{label:"Medical Condition",name:"condition",value:a.condition||"",onChange:l=>o(l,t,"condition","medical_conditions"),placeholder:"Select or enter condition"}),e.jsx(r,{message:d[`medical_conditions.${t}.condition`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(P,{label:"Condition Status",name:"status",value:a.status||"",onChange:l=>o(l,t,"status","medical_conditions"),items:[{label:"Active",value:"active"},{label:"Resolved",value:"resolved"},{label:"Chronic",value:"chronic"}]}),e.jsx(r,{message:d[`medical_conditions.${t}.status`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Diagnosed Date",name:"diagnosed_date",type:"date",value:a.diagnosed_date||"",onChange:l=>o(l,t,"diagnosed_date","medical_conditions")}),e.jsx(r,{message:d[`medical_conditions.${t}.diagnosed_date`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Resolved Date",name:"resolved_date",type:"date",value:a.resolved_date||"",onChange:l=>o(l,t,"resolved_date","medical_conditions")}),e.jsx(r,{message:d[`medical_conditions.${t}.resolved_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>b("medical_conditions",t),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Medicaton",children:e.jsx(j,{className:"text-2xl"})})]},t))}),e.jsxs("button",{type:"button",onClick:()=>p("medical_conditions"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Medical Condition",children:[e.jsx(_,{className:"text-2xl"}),"Add Medical Condition"]})]}):s.has_medical_condition==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No medical condition declared."}):null})]})]}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{children:[e.jsx("hr",{className:"h-[2px] bg-sky-500 border-0 mt-7"}),e.jsx("p",{className:"font-bold text-lg mt-3 text-gray-800",children:"Vaccinations"})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4 mx-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Do you any Vaccinations?",name:"has_vaccination",options:[{label:"Yes",value:1},{label:"No",value:0}],selectedValue:s.has_vaccination||null,onChange:a=>n("has_vaccination",a.target.value)})}),e.jsx("div",{children:s.has_vaccination==1?e.jsxs(e.Fragment,{children:[s.vaccinations.length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No vaccinations added yet."}),e.jsx("div",{className:"grid md:grid-cols-1 gap-4",children:s.vaccinations.map((a,t)=>e.jsxs("div",{className:"relative mb-4 p-4 bg-sky-100 border rounded-md",children:[e.jsxs("div",{children:[e.jsx(g,{label:"Vaccine",name:"vaccine",value:a.vaccine||"",onChange:l=>o(l,t,"vaccine","vaccinations"),placeholder:"Select or enter vaccine"}),e.jsx(r,{message:d[`vaccinations.${t}.vaccine`],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{label:"Vaccination Date",name:"vaccination_date",type:"date",value:a.vaccination_date||"",onChange:l=>o(l,t,"vaccination_date","vaccinations")}),e.jsx(r,{message:d[`vaccinations.${t}.vaccination_date`],className:"mt-2"})]}),e.jsx("button",{type:"button",onClick:()=>b("vaccinations",t),className:"absolute top-2 right-2 text-red-400 hover:text-red-700 text-xl",title:"Remove Vaccination",children:e.jsx(j,{className:"text-2xl"})})]},t))}),e.jsxs("button",{type:"button",onClick:()=>p("vaccinations"),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-base mt-2 font-medium",title:"Add Vaccination",children:[e.jsx(_,{className:"text-2xl"}),"Add Vaccination"]})]}):s.has_medical_condition==0?e.jsx("p",{className:"text-sm text-gray-500 italic mt-2",children:"No vaccination declared."}):null})]})]})]}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-7 gap-4",children:[e.jsxs(f,{type:"button",onClick:()=>R(),children:[e.jsx(I,{})," Reset"]}),e.jsx(f,{className:"w-40 bg-blue-700 hover:bg-blue-400",type:"submit",children:"Submit"})]})]})})]})})})]})]})}export{Me as default};
