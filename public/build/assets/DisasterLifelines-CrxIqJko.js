import{j as e,L as w,S as c}from"./app-CS3xBDn4.js";import{S as D}from"./AdminLayout-CMiWpSlz.js";import C from"./BreadcrumbsHeader-DC9Gv4yS.js";import{T as k}from"./TableSection-DnooAkax.js";import S from"./DynamicTable-DTcaIRDu.js";import{B as T}from"./BarangayFilterCard-CWxu4K1y.js";import{N as _}from"./NoDataPlaceholder-CBp4LVEt.js";import{H as $}from"./heart-pulse-C4WGp4ar.js";import"./sidebar-DWN-gsds.js";import"./button-B8B0JdFz.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-Ct3TSe4c.js";import"./index-BMBOR9s2.js";import"./index-Bw5nnXzP.js";import"./floating-ui.react-dom-BCVfPlbL.js";import"./x-c6AxYMg_.js";import"./createLucideIcon-Oh1tj2jv.js";import"./tooltip-Bk_V-T3H.js";import"./nav-user-BEeuouCK.js";import"./avatar-WEcn5_mY.js";import"./dropdown-menu-CvOdXlyp.js";import"./check-DbASIX_B.js";import"./chevron-right-Cg3pkUfa.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-ToJTLdOW.js";import"./index-C5xsXXsb.js";import"./DeleteConfirmationModal-mx3XGNEv.js";import"./file-text-CbEqGSkR.js";import"./users-round-C8TCJeo7.js";import"./chevron-up-B3J6nQHG.js";import"./breadcrumb-CeWUzcdl.js";import"./card-64761JN-.js";import"./SelectField-BE7pmqt4.js";const E=new Intl.NumberFormat;function be({disasterLifelineData:s,overallDisasterLifelineData:i,barangays:d=[],selectedBarangay:r,queryParams:l,tip:H}){const p=[{label:"Dashboard",showOnMobile:!0}];l=l||{};const b=t=>{const a=Number(t);return Number.isFinite(a)?a:0},x=t=>{const a=t.target.value;c.get(route("cdrrmo_admin.disasterlifelines"),a?{barangay_id:a}:{})},h=!s||s.length===0,u=!i||i.length===0,g=r&&h||!r&&u,n=[{key:"category",label:"Category"},{key:"description",label:"Description"},{key:"value",label:"Value"},{key:"source",label:"Source"}],y={category:t=>e.jsx("span",{className:"text-gray-800 font-medium",children:t.category||"—"}),description:t=>e.jsx("span",{className:"text-gray-700",children:t.description||"—"}),value:t=>e.jsx("span",{className:"font-bold text-blue-700",children:E.format(b(t.value))}),source:t=>e.jsx("span",{className:"text-gray-700",children:t.source||"—"})};return e.jsxs(D,{children:[e.jsx(w,{title:"Disaster Lifelines Dashboard"}),e.jsx(C,{breadcrumbs:p}),e.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx(T,{selectedBarangay:r,handleBarangayChange:x,barangays:d}),r?g?e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:e.jsx(_,{tip:"Use the year selector above to navigate to a year with available data."})}):s.map((t,a)=>t.disasters.map((o,f)=>{var m;const j=o.disaster_name,N=((m=o.lifelines[0])==null?void 0:m.year)||"—";return e.jsx(k,{icon:e.jsx($,{}),color:"blue",title:`${j} in ${t.barangay_name} (${N})`,description:"Lifeline impact records for this disaster event.",tableProps:{component:S,passedData:o.lifelines,allColumns:n,columnRenderers:y,visibleColumns:n.map(v=>v.key),showTotal:!1,tableHeight:"400px"}},`${a}-${f}`)})):e.jsxs("div",{className:"flex flex-col items-center justify-center mt-15 bg-gradient-to-br from-gray-50 to-gray-100 p-12 rounded-3xl shadow-xl border border-gray-200 hover:border-gray-300 transition-all duration-300",children:[e.jsx("img",{src:"/images/chart_error.png",alt:"No data",className:"w-48 h-48 mb-6 animate-bounce"}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-3 text-center",children:"No Data Available"}),e.jsxs("p",{className:"text-gray-700 text-center mb-3 max-w-xl text-base leading-relaxed",children:["To view disaster population impact data, please"," ",e.jsx("span",{className:"font-bold text-blue-600",children:"select a barangay"})," ","from the dropdown above. Only barangays with recorded disaster impact data for the chosen year will display results."]}),e.jsx("p",{className:"text-gray-600 text-center mb-6 max-w-xl text-sm italic leading-relaxed",children:"Ensure the data for the selected barangay has been properly recorded in the system. Once selected, the dashboard will display accurate statistics and affected population information."}),e.jsx("button",{onClick:()=>c.reload(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105 hover:shadow-lg",children:"Refresh Page"})]})]})})]})}export{be as default};
