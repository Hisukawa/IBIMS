import{r as $,K as R,j as e,L as z,S as A}from"./app-1Ulo33cR.js";import{C as O,a as H,b as I,c as P}from"./card-o43IzILD.js";import{S as T,H as U,U as E}from"./AdminLayout-CgEQ-MOT.js";import F from"./BreadcrumbsHeader-CMB94YvU.js";import{C as L}from"./Counter-CjBvzTE7.js";import B from"./AgeDistributionChart-kLS-gZ8j.js";import q from"./GenderDonutChart-CSWydoov.js";import{C as M,a as V}from"./CRAProgressList-CjHSRYPw.js";import G from"./LivelihoodStatisticsChart-9-AO5kzY.js";import K from"./Piechart-C6Ck3O08.js";import{N as Q}from"./NoDataPlaceholder-CnTiIKSA.js";import"./button-Dwc0dclq.js";import{c as i}from"./createLucideIcon-lg7BGEjz.js";import{T as Y}from"./triangle-alert-B_lR1ung.js";import{B as J}from"./briefcase-Ow_18v91.js";import{U as W}from"./user-btfe-f-c.js";import{U as X}from"./users-round-zz5oswS3.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./sidebar-D4MJiJYy.js";import"./input-Ch6UbAXw.js";import"./index-EHQ60H1N.js";import"./index-D_B9yfGd.js";import"./floating-ui.react-dom-BdtgEX0V.js";import"./x-DdBsHjtD.js";import"./tooltip-DNKVLhHk.js";import"./nav-user-CZVgQQZ5.js";import"./avatar-B8lufsIp.js";import"./dropdown-menu-CygdrkB3.js";import"./check-Cm4yWAm8.js";import"./chevron-right-4sH-p9KV.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-D28WZQb-.js";import"./index-C_WBzw8-.js";import"./DeleteConfirmationModal-CTSpiu8N.js";import"./file-text-DaWao37R.js";import"./heart-pulse-a6F5h5IG.js";import"./chevron-up-C-oVtybp.js";import"./breadcrumb-D68v6IuP.js";import"./ResponsiveContainer-DadWAs8U.js";import"./CategoricalChart-C0imHmT-.js";import"./string-BbYD24iH.js";import"./BarChart-BltWmOxo.js";import"./Label-DeKtx6FW.js";import"./CartesianGrid-DuieXDuJ.js";import"./XAxis-B0-NIyzN.js";import"./Tooltip-BAVjAuxH.js";import"./Legend-BXTvuOy0.js";import"./PieChart-Cc5MljF0.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ee=i("chart-no-axes-column",Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],h=i("flame",se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ae=i("shield-check",re),te={population:e.jsx(E,{className:"w-8 h-8 text-blue-500"}),household:e.jsx(U,{className:"w-8 h-8 text-orange-500"}),family:e.jsx(X,{className:"w-8 h-8 text-purple-500"})};function as({totalPopulation:l,totalHouseholds:n,totalFamilies:d,ageDistribution:c=[],genderData:m=[],barangays:u=[],topBarangays:g=[],livelihoodStatistics:y=[],selectedBarangay:t,householdServices:f=[]}){var p;const b=[{label:"Dashboard",showOnMobile:!0}],[oe,ie]=$.useState("desc"),{props:j}=R(),N=f.reduce((s,r)=>(s[r.category]||(s[r.category]={}),s[r.category][r.service_name]?s[r.category][r.service_name]+=r.households_quantity:s[r.category][r.service_name]=r.households_quantity,s),{}),v=Object.entries(N).reduce((s,[r,o])=>(s[r]=Object.entries(o).map(([a,D])=>({service_name:a,households_quantity:D})),s),{}),w=[{title:"Total Population",value:l,icon:"population"},{title:"Total Households",value:n,icon:"household"},{title:"Total Families",value:d,icon:"family"}],C=s=>{const r=s.target.value;A.get(route("cdrrmo_admin.dashboard"),{barangay_id:r})},_=l===null||n===null||d===null||c.length===0||m.length===0,S=[{title:"Population Overview Summary",icon:e.jsx(ee,{className:"w-6 h-6 text-green-500"}),routeName:"cdrrmo_admin/cra/population-overview-summary/pdf",color:"bg-green-100",description:"Overview of population metrics and statistics"},{title:"Top Hazard Summary",icon:e.jsx(Y,{className:"w-6 h-6 text-red-500"}),routeName:"cdrrmo_admin/cra/top-hazard/pdf",color:"bg-red-100",description:"Highlights top hazards affecting the community"},{title:"Livelihood Summary",icon:e.jsx(J,{className:"w-6 h-6 text-yellow-500"}),routeName:"cdrrmo_admin/cra/livelihood-summary/pdf",color:"bg-yellow-100",description:"Summary of livelihoods and economic activities"},{title:"Human Resources Summary",icon:e.jsx(W,{className:"w-6 h-6 text-purple-500"}),routeName:"cdrrmo_admin/cra/hr-summary/pdf",color:"bg-purple-100",description:"Overview of human resources and personnel data"},{title:"Disaster Risk Population Summary",icon:e.jsx(h,{className:"w-6 h-6 text-orange-500"}),routeName:"cdrrmo_admin/cra/risk-assessment-summary/pdf",color:"bg-orange-100",description:"Population at risk for various disaster types"},{title:"Risk Assessment Summary",icon:e.jsx(ae,{className:"w-6 h-6 text-teal-500"}),routeName:"cdrrmo_admin/cra/vulnerability-assessment-summary/pdf",color:"bg-teal-100",description:"Assessment of potential risks and vulnerabilities"},{title:"Vulnerability Assessment Summary",icon:e.jsx(V,{className:"w-6 h-6 text-pink-500"}),routeName:"vulnerabilityassessment.summary.pdf",color:"bg-pink-100",description:"Detailed vulnerability analysis and reports"}],k=["Flood","Pandemic / Emerging and Re-emerging Diseases","Typhoon","Rain-induced Landslide","Fire","Earthquake","Drought","Vehicular Incident"].map((s,r)=>({index:r,title:`${s} Disaster Risk Summary`,icon:e.jsx(h,{className:"w-6 h-6 text-orange-500"}),routeName:`cdrrmo_admin/cra/population-exposure-summary/pdf?hazard=${encodeURIComponent(s)}`,color:"bg-orange-100",description:`Summary report for ${s} hazard`})),x=s=>{const r=sessionStorage.getItem("cra_year")||new Date().getFullYear(),o=s.includes("?"),a=`${window.location.origin}/${s.replace(/^\/+/,"")}${o?"&":"?"}year=${r}`;console.log(a),window.open(a,"_blank")};return e.jsxs(T,{children:[e.jsx(z,{title:"Admin Dashboard"}),e.jsx(F,{breadcrumbs:b}),e.jsx("div",{className:"pt-2 pb-8 min-h-screen bg-gray-50",children:e.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:_?e.jsx(Q,{tip:"No data available for the selected barangay or year."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 mb-0",children:"Barangay Statistics"}),e.jsx("p",{className:"text-sm text-gray-500",children:t?"Overview for the selected barangay":"Overview for Ilagan City (all barangays)"})]}),e.jsxs("select",{className:"border border-gray-300 rounded-lg p-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:t||"",onChange:C,children:[e.jsx("option",{value:"",children:"Ilagan City (All Barangays)"}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-2",children:[e.jsxs("div",{className:"lg:col-span-9 flex flex-col gap-2",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:w.map((s,r)=>e.jsxs(O,{className:"flex items-center justify-between rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow-md transition-all duration-200 p-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-50",children:te[s.icon]}),e.jsxs("div",{className:"text-right max-w-[70%]",children:[e.jsx(H,{className:"p-0",children:e.jsx("p",{className:"text-base md:text-lg font-bold text-gray-900",children:e.jsx(L,{end:s.value,duration:900})})}),e.jsx(I,{className:"p-0 mt-0.5",children:e.jsx(P,{className:"text-xs font-medium text-gray-600",children:s.title})})]})]},r))}),e.jsx(B,{ageDistribution:c}),e.jsx(G,{livelihoodStatistics:y})]}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full max-w-full",children:e.jsx(M,{data:g,selectedBarangayId:t,year:((p=j.session)==null?void 0:p.cra_year)||null})}),e.jsx("div",{className:"w-full max-w-full",children:e.jsx(q,{genderData:m})})]}),e.jsx("div",{className:"lg:col-span-12 flex gap-2",children:Object.entries(v).map(([s,r])=>e.jsxs("div",{className:"flex-1 bg-white rounded-lg shadow p-4 border hover:shadow-xl",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:s}),e.jsx(K,{data:r})]},s))})]}),e.jsxs("div",{className:"space-y-12 px-6 py-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"General Reports"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:S.map(s=>e.jsxs("div",{className:"flex flex-col justify-between p-5 rounded-xl shadow-md hover:shadow-xl transition bg-white border border-gray-200 hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${s.color} text-white`,children:s.icon}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:s.description||"Summary report available"}),e.jsx("button",{onClick:()=>x(s.routeName),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-sm transition",children:"Export PDF"})]},s.title))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Hazard Reports"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:k.map(s=>e.jsxs("div",{className:"flex flex-col justify-between p-5 rounded-xl shadow-md hover:shadow-xl transition bg-white border border-gray-200 hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${s.color} text-white`,children:s.icon}),e.jsx("h3",{className:"text-base font-semibold text-gray-900",children:s.title})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:s.description||"Summary report available"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-700",children:"Hazard"}),e.jsx("button",{onClick:()=>x(s.routeName),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-sm transition",children:"Export PDF"})]})]},`${s.index}-${s.title}`))})]})]})]})})})]})}export{as as default};
