import{j as e,L as C,S as B}from"./app-D81CliT5.js";import{S as A}from"./AdminLayout-DiBkyMyO.js";import D from"./BreadcrumbsHeader-BlJPi0bA.js";import{T as f}from"./TableSection-B6FoWR-7.js";import y from"./DynamicTable-CSLYcd0l.js";import{B as H}from"./BarangayFilterCard-g6g9gTWz.js";import{N as b}from"./NoDataPlaceholder-Csrottqd.js";import{c as x}from"./createLucideIcon-BSDB7QtE.js";import"./sidebar-BoAUmAq2.js";import"./button-gcQ0GUSx.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-DwkB4HOX.js";import"./index-CCPwMpno.js";import"./index-CZBYw026.js";import"./floating-ui.react-dom-CqbO0hLn.js";import"./x-GIpbyFu4.js";import"./tooltip-I5AizP5E.js";import"./nav-user-DFgmB8A_.js";import"./avatar-B7RYlqfZ.js";import"./dropdown-menu-B2AXIRPO.js";import"./check-CMwsAFld.js";import"./chevron-right-DZRfUTGk.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-pHKvdS7f.js";import"./index-BMM9kjq2.js";import"./DeleteConfirmationModal-Cd8iZMFl.js";import"./file-text-ekKlpQIn.js";import"./users-round-CWIZIE0I.js";import"./heart-pulse-DFXrk-rr.js";import"./chevron-up-B8CiRrQ3.js";import"./breadcrumb-BA5PD1Ph.js";import"./card-BJ_zpEEn.js";import"./SelectField-DWmijfj2.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],O=x("activity",L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],z=x("zap",w);function ge({disasterEffectsData:n,overallDisasterEffectsData:p=[],barangays:h=[],selectedBarangay:m,tip:M=null,queryParams:u}){const _=[{label:"Dashboard",showOnMobile:!0}];u=u||{};const g=!!m,j=!n||n.length===0,v=!p||p.length===0,N=l=>{const o=l.target.value;B.get(route("cdrrmo_admin.effectimpact"),o?{barangay_id:o}:{})};return e.jsxs(A,{children:[e.jsx(C,{title:"Disaster Effect & Impact Dashboard"}),e.jsx(D,{breadcrumbs:_}),e.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx(H,{selectedBarangay:m,handleBarangayChange:N,barangays:h}),g?j?e.jsx(b,{tip:"No disaster effect and impact data available for the selected barangay."}):n.map((l,o)=>{const i=l.disasters.reduce((s,a)=>(s[a.disaster_id]||(s[a.disaster_id]=[]),s[a.disaster_id].push(a),s),{});return Object.entries(i).map(([s,a],c)=>{const t=[{key:"effect_type",label:"Effect Type"},{key:"value",label:"Value"},{key:"source",label:"Source"}],T={effect_type:r=>e.jsx("span",{className:"text-gray-700",children:r.effect_type}),value:r=>e.jsx("span",{className:"font-bold text-blue-600",children:r.value}),source:r=>e.jsx("span",{className:"text-gray-700",children:r.source})},$=a[0].disaster_name,k=a[0].year,d=a.reduce((r,S)=>r+Number(S.value||0),0),I={disaster_id:null,disaster_name:null,year:null,effect_type:"Total Impact Value",value:d,source:""},V=[...a,I];return e.jsx(f,{icon:e.jsx(z,{}),color:"purple",title:`${$} in ${l.barangay_name} (${k})`,description:`Total impact value: ${d}`,tableProps:{component:y,passedData:V,allColumns:t,columnRenderers:T,visibleColumns:t.map(r=>r.key),showTotal:!0,tableHeight:"400px"}},`${o}-${s}`)})}):v?e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:e.jsx(b,{tip:"No overall disaster impact data available for the selected year."})}):p.map((l,o)=>{var c;const i=[{key:"effect_type",label:"Effect Type"},{key:"value",label:"Value"},{key:"source",label:"Source"}],s={effect_type:t=>e.jsx("span",{className:`${t.effect_type==="Total Impact Value"?"font-bold text-gray-900":"text-gray-700"}`,children:t.effect_type}),value:t=>e.jsx("span",{className:`${t.effect_type==="Total Impact Value"?"font-bold text-blue-700":"text-blue-600"}`,children:t.value}),source:t=>e.jsx("span",{className:"text-gray-700",children:t.source||"â€”"})},a=(c=l.effects.find(t=>t.effect_type==="Total Impact Value"))==null?void 0:c.value;return e.jsx(f,{icon:e.jsx(O,{}),color:"blue",title:`${l.disaster_name} (Overall Summary)`,description:`Total impact value across all barangays: ${a}`,tableProps:{component:y,passedData:l.effects,allColumns:i,columnRenderers:s,visibleColumns:i.map(t=>t.key),showTotal:!0,tableHeight:"400px"}},o)})]})})]})}export{ge as default};
