import{j as t,L as _,S as M}from"./app-DMmsW-A6.js";import{S as v,G as L,U as C}from"./AdminLayout-s2Bg1gEI.js";import S from"./BreadcrumbsHeader-CQRb1WyO.js";import{T}from"./TableSection-wm9Rzofq.js";import Z from"./DynamicTable-CnF2Nh-V.js";import{B as E}from"./BarangayFilterCard-CVuVSlTx.js";import{N as F}from"./NoDataPlaceholder-CPu-rcqX.js";import{H}from"./heart-pulse-DBAzLY-n.js";import{c as w}from"./createLucideIcon-DSuPfUAD.js";import"./sidebar-BiiRPV0L.js";import"./button-D_fqYeI3.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-D-aSGzhB.js";import"./index-qc4Eloka.js";import"./index-Dnxev_1w.js";import"./floating-ui.react-dom-8IMhXsT1.js";import"./x-rjPTyOHx.js";import"./tooltip-DThek2hS.js";import"./nav-user-CEblRaG9.js";import"./avatar-BndQxUS4.js";import"./dropdown-menu-Cgkeayzc.js";import"./check-BJLNsZCV.js";import"./chevron-right-eZaM9hCd.js";import"./useAppUrl-CXIdVTwR.js";import"./index-e775IZAD.js";import"./DeleteConfirmationModal-D4cJmc7b.js";import"./file-text-CxtLRQ9w.js";import"./users-round-D7-pb-rw.js";import"./chevron-up-D6aks0ux.js";import"./breadcrumb-DDzvfMYC.js";import"./card-DNoXSFtq.js";import"./SelectField-DLYOq2uw.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],B=w("wheat",A);function ya({infraData:i,barangays:y=[],selectedBarangay:p,queryParams:d}){const g=[{label:"Dashboard",showOnMobile:!0}];d=d||{};const f=!i||i.length===0,x=o=>{const l=o.target.value;M.get(route("cdrrmo_admin.infraFacilities"),l?{barangay_id:l}:{})},j={"Agricultural Facilities":{icon:t.jsx(B,{}),color:"green"},"Educational Facilities":{icon:t.jsx(L,{}),color:"blue"},"Health and Medical Facilities":{icon:t.jsx(H,{}),color:"red"}};return t.jsxs(v,{children:[t.jsx(_,{title:"Admin Dashboard"}),t.jsx(S,{breadcrumbs:g}),t.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:t.jsx("div",{className:"mx-auto w-full",children:f?t.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:t.jsx(F,{tip:"Use the year selector above to navigate to a year with available data."})}):t.jsxs(t.Fragment,{children:[t.jsx(E,{selectedBarangay:p,handleBarangayChange:x,barangays:y}),i.length>0&&i[0].categories.map((o,l)=>{const u=new Set;i.forEach(a=>{const e=a.categories.find(r=>r.category===o.category);e&&e.facilities.forEach(r=>u.add(r.infrastructure_name))});const n=Array.from(u).map(a=>({key:a,label:a})),h=[{key:"barangay_name",label:"Barangay"},...n,{key:"total",label:"Total"}],c=i.map(a=>{const e=a.categories.find(s=>s.category===o.category),r={number:a.number,barangay_name:a.barangay_name,total:Number((e==null?void 0:e.total)||0)};return n.forEach(s=>{const m=e==null?void 0:e.facilities.find(N=>N.infrastructure_name===s.key);r[s.key]=Number((m==null?void 0:m.quantity)||0)}),r});if(!p){const a={number:null,barangay_name:"TOTAL",total:c.reduce((e,r)=>e+r.total,0)};n.forEach(e=>{a[e.key]=c.reduce((r,s)=>r+s[e.key],0)}),c.push(a)}const k={barangay_name:a=>t.jsx("span",{className:"font-semibold text-gray-700",children:a.barangay_name}),total:a=>t.jsx("span",{className:"font-bold text-blue-600",children:a.total}),...n.reduce((a,e)=>(a[e.key]=r=>t.jsx("span",{className:"text-gray-700",children:r[e.key]}),a),{})},b=j[o.category]||{icon:t.jsx(C,{}),color:"gray"};return t.jsx(T,{icon:b.icon,color:b.color,title:o.category,description:`Infrastructure facilities under ${o.category}`,tableProps:{component:Z,passedData:c,allColumns:h,columnRenderers:k,visibleColumns:h.map(a=>a.key),showTotal:!0,tableHeight:"500px"}},l)})]})})})]})}export{ya as default};
