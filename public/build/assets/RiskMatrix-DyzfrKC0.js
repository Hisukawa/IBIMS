import{j as e,L as b,S as x}from"./app-D81CliT5.js";import{S as y,T as u}from"./AdminLayout-DiBkyMyO.js";import N from"./BreadcrumbsHeader-BlJPi0bA.js";import{T as i}from"./TableSection-B6FoWR-7.js";import m from"./DynamicTable-CSLYcd0l.js";import{N as j}from"./NoDataPlaceholder-Csrottqd.js";import{B as k}from"./BarangayFilterCard-g6g9gTWz.js";import{B as f}from"./button-gcQ0GUSx.js";import{S as _}from"./shield-alert-rWCxWb6V.js";import{C as v}from"./chart-column-C4S0rhPh.js";import{F as S}from"./file-spreadsheet-BJhkcQTz.js";import"./sidebar-BoAUmAq2.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./input-DwkB4HOX.js";import"./index-CCPwMpno.js";import"./index-CZBYw026.js";import"./floating-ui.react-dom-CqbO0hLn.js";import"./x-GIpbyFu4.js";import"./createLucideIcon-BSDB7QtE.js";import"./tooltip-I5AizP5E.js";import"./nav-user-DFgmB8A_.js";import"./avatar-B7RYlqfZ.js";import"./dropdown-menu-B2AXIRPO.js";import"./check-CMwsAFld.js";import"./chevron-right-DZRfUTGk.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-pHKvdS7f.js";import"./index-BMM9kjq2.js";import"./DeleteConfirmationModal-Cd8iZMFl.js";import"./file-text-ekKlpQIn.js";import"./users-round-CWIZIE0I.js";import"./heart-pulse-DFXrk-rr.js";import"./chevron-up-B8CiRrQ3.js";import"./breadcrumb-BA5PD1Ph.js";import"./card-BJ_zpEEn.js";import"./SelectField-DWmijfj2.js";function pe({riskMatrixData:n=[],overallRiskMatrixData:s=[],overallHazardSummary:o=[],barangays:p=[],selectedBarangay:t,queryParams:L={}}){const d=[{label:"Dashboard",showOnMobile:!0}],c=a=>{const l=a.target.value;x.get(route("cdrrmo_admin.riskmatrix"),l?{barangay_id:l}:{})},h=!t&&o.length===0&&s.length===0||t&&n.length===0,g=()=>{const a=sessionStorage.getItem("cra_year")||new Date().getFullYear(),r=`${window.location.origin}/cdrrmo_admin/cra/risk-assessment-summary/pdf?year=${a}`;window.open(r,"_blank")};return e.jsxs(y,{children:[e.jsx(b,{title:"Risk Matrix Assessment"}),e.jsx(N,{breadcrumbs:d}),e.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:e.jsx("div",{className:"mx-auto w-full",children:h?e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:e.jsx(j,{tip:"Select a barangay to view Risk Matrix data."})}):e.jsxs(e.Fragment,{children:[e.jsx(k,{selectedBarangay:t,handleBarangayChange:c,barangays:p}),(n==null?void 0:n.length)>0&&n.map((a,l)=>e.jsx(i,{icon:e.jsx(_,{}),color:"rose",title:`Hazard Risk Assessment Matrix - ${a.barangay_name}`,description:"Displays the detailed risk assessment for each identified hazard in the selected barangay, including people, properties, services, environment, and livelihood impact levels.",tableProps:{component:m,passedData:a.hazards,allColumns:[{key:"no",label:"No."},{key:"hazard_name",label:"Hazard"},{key:"people",label:"People Affected"},{key:"properties",label:"Properties"},{key:"services",label:"Services"},{key:"environment",label:"Environment"},{key:"livelihood",label:"Livelihood"}],columnRenderers:{no:r=>e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:r.no}),hazard_name:r=>e.jsx("span",{className:"font-medium text-gray-800",children:r.hazard_name}),people:r=>e.jsx("span",{className:"text-gray-700",children:Number(r.people||0).toLocaleString()}),properties:r=>e.jsx("span",{className:"text-gray-700",children:r.properties}),services:r=>e.jsx("span",{className:"text-gray-700",children:r.services}),environment:r=>e.jsx("span",{className:"text-gray-700",children:r.environment}),livelihood:r=>e.jsx("span",{className:"text-gray-700",children:r.livelihood})},visibleColumns:["no","hazard_name","people","properties","services","environment","livelihood"],tableHeight:"480px"}},l)),(o==null?void 0:o.length)>0&&e.jsx(i,{icon:e.jsx(v,{}),color:"indigo",title:"Overall Hazard Risk Summary",description:"Summarizes the overall risk level of each hazard across all barangays, showing the total number of people affected and their corresponding overall rank.",tableProps:{component:m,passedData:o,allColumns:[{key:"no",label:"No."},{key:"hazard_name",label:"Hazard"},{key:"total_people",label:"Total People Affected"},{key:"overall_rank",label:"Overall Rank"}],columnRenderers:{no:a=>e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:a.no}),hazard_name:a=>e.jsx("span",{className:"font-medium text-gray-800",children:a.hazard_name}),total_people:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.total_people).toLocaleString()}),overall_rank:a=>e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:a.overall_rank})},visibleColumns:["no","hazard_name","total_people","overall_rank"],tableHeight:"450px"}}),(s==null?void 0:s.length)>0&&e.jsx(i,{icon:e.jsx(u,{}),color:"emerald",title:"Barangay Hazard Risk Summary Matrix",description:"Displays the summarized hazard risk levels per barangay, showing the number of people affected by each hazard type and their corresponding overall rank based on total population exposure.",tableProps:{component:m,passedData:s,allColumns:[{key:"no",label:"No."},{key:"barangay_name",label:"Barangay Name"},{key:"Flood",label:"Flood"},{key:"Earthquake",label:"Earthquake"},{key:"Rain-induced Landslide",label:"Rain-Induced Landslide"},{key:"Fire",label:"Fire"},{key:"Typhoon",label:"Typhoon"},{key:"Drought",label:"Drought"},{key:"Pandemic/Emerging and Re-emerging Diseases",label:"Pandemic / Emerging and Re-emerging Diseases"},{key:"total_people",label:"Total People"},{key:"overall_rank",label:"Overall Rank"}],columnRenderers:{no:a=>e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:a.no}),barangay_name:a=>e.jsx("span",{className:"font-medium text-gray-800",children:a.barangay_name}),Flood:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.Flood||0).toLocaleString()}),Earthquake:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.Earthquake||0).toLocaleString()}),"Rain-induced Landslide":a=>e.jsx("span",{className:"text-gray-700",children:Number(a["Rain-induced Landslide"]||0).toLocaleString()}),Fire:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.Fire||0).toLocaleString()}),Typhoon:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.Typhoon||0).toLocaleString()}),Drought:a=>e.jsx("span",{className:"text-gray-700",children:Number(a.Drought||0).toLocaleString()}),"Pandemic/Emerging and Re-emerging Diseases":a=>e.jsx("span",{className:"text-gray-700",children:Number(a["Pandemic/Emerging and Re-emerging Diseases"]||0).toLocaleString()}),total_people:a=>e.jsx("span",{className:"font-semibold text-gray-800",children:Number(a.total_people||0).toLocaleString()}),overall_rank:a=>e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:a.overall_rank})},visibleColumns:["no","barangay_name","Flood","Earthquake","Rain-induced Landslide","Fire","Typhoon","Drought","Pandemic/Emerging and Re-emerging Diseases","total_people","overall_rank"],tableHeight:"500px"},children:e.jsxs(f,{variant:"default",size:"sm",onClick:g,className:"bg-green-600 text-white hover:bg-green-700 ml-2",children:[e.jsx(S,{}),"Export Risk Assessment Summary"]})})]})})})]})}export{pe as default};
