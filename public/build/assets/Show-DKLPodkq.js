<<<<<<<< HEAD:public/build/assets/Show-D6664usy.js
import{K as oe,r as a,j as t,L as ie,$ as U,S as f,a as M}from"./app-CxQIk-Ug.js";import le from"./BreadcrumbsHeader-ztKk4f-G.js";import{S as ce}from"./AdminLayout-Ch0RJaaH.js";import me from"./DynamicTableControls-BBZXxs2q.js";import pe from"./DynamicTable-CqqNB_Qd.js";import{F as ue}from"./FillterToggle-DxBAgWQx.js";import de from"./SidebarModal-BwBQKpMA.js";import xe from"./PersonDetailContent-DCjK3wlL.js";import{B as _}from"./button-eWlrO1vI.js";import{I as ye}from"./input-C3invO0g.js";import{u as ge,s as be,r as fe,v as w,w as _e,x as we,y as Ee,z as he,M as Te,m as Se,H as je,n as Ne,o as ve,p as Oe,R as De,b as Re}from"./constants-DEVjsWMH.js";import ke from"./ActionMenu-BbqZ2nO_.js";import{u as He}from"./useAppUrl-CjqOY4Q6.js";import{u as Ie}from"./useQuery-D8TZOE0x.js";import Ce from"./DeleteConfirmationModal-BIRqOANr.js";import{t as F,T as Ae}from"./index-BxD4ZtM3.js";import{S as Le}from"./search-CXT4UFH7.js";import{c as Pe}from"./createLucideIcon-DUzL0oSb.js";import{N as Ue}from"./network-BcyzCueB.js";import{E as Me}from"./eye-J4ZcBwFV.js";import{S as Fe}from"./square-pen-BRCyuNmj.js";import{X as Xe}from"./x-CoOb-UyO.js";import"./breadcrumb-ZXvPNnk5.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-9pm6d_Wd.js";import"./sidebar-CmbCP2Gp.js";import"./index-a0Ptbf1R.js";import"./index-D20yT8t5.js";import"./floating-ui.react-dom-CDryE2et.js";import"./skeleton-DNA1kKC7.js";import"./tooltip-DJWjtVs0.js";import"./nav-user-CUeqll6F.js";import"./avatar-CT_f4ETp.js";import"./dropdown-menu-BIG2J05K.js";import"./check-BlEJph0r.js";import"./users-round-Dhttk4ok.js";import"./heart-pulse-DEWB0aq-.js";import"./chevron-up-DDsNXP0q.js";import"./iconBase-CyZ4dN64.js";import"./index-DYSEvW9_.js";import"./index-CHuq8Fb5.js";import"./ellipsis-lwZyIBcE.js";/**
========
import{K as oe,r as a,j as t,L as ie,$ as U,S as f,a as M}from"./app-D2VBHUnE.js";import le from"./BreadcrumbsHeader-D50VREse.js";import{S as ce}from"./AdminLayout-BvapmRau.js";import me from"./DynamicTableControls-I3Z4kOWV.js";import pe from"./DynamicTable-XHjF8o-O.js";import{F as ue}from"./FillterToggle-C9gZhFi5.js";import de from"./SidebarModal-DNYbxHgQ.js";import xe from"./PersonDetailContent-Cnv6cDFd.js";import{B as _}from"./button-JXF2cuM-.js";import{I as ye}from"./input-CsX4RkmY.js";import{u as ge,s as be,r as fe,v as w,w as _e,x as we,y as Ee,z as he,M as Te,m as Se,H as je,n as Ne,o as ve,p as Oe,R as De,b as Re}from"./constants-B2gvBLga.js";import ke from"./ActionMenu-DEwdglpY.js";import{u as He}from"./useAppUrl-BohVm5NF.js";import{u as Ie}from"./useQuery-Cm86VOUJ.js";import Ce from"./DeleteConfirmationModal-mSKtI5Ku.js";import{t as F,T as Ae}from"./index-CmbHX13U.js";import{S as Le}from"./search-D4RGGk5s.js";import{c as Pe}from"./createLucideIcon-qFzIO3KD.js";import{N as Ue}from"./network-CXjjm9OG.js";import{E as Me}from"./eye-CHIr_NBw.js";import{S as Fe}from"./square-pen-D6Zluk2r.js";import{X as Xe}from"./x-DtldsTYz.js";import"./breadcrumb-D0WyvY7Z.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-BJZaoRcX.js";import"./sidebar-MVOyybzj.js";import"./index-6s3vvleY.js";import"./index-C2GEi9Oq.js";import"./floating-ui.react-dom-DwQNVWkT.js";import"./skeleton-CZuzpLfI.js";import"./tooltip-Cb0wL2_a.js";import"./nav-user-BCj3xiYY.js";import"./avatar-7KytdQpz.js";import"./dropdown-menu-DG5UGZdM.js";import"./check-C5u2RFjT.js";import"./users-round-CjEM6b0u.js";import"./heart-pulse-Bpcsk9jC.js";import"./chevron-up-CnPsG_gG.js";import"./iconBase-CwqvEYsG.js";import"./index-Bxj-GTwv.js";import"./index-DHbXjuq_.js";import"./ellipsis-DAg75UxB.js";/**
>>>>>>>> 80c2705af2b118d58401176cb54388a976789fdd:public/build/assets/Show-KHaaU1zz.js
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],We=Pe("share-2",$e);function Lt({household_details:s,household_members:X,queryParams:$=null}){var R,k,H,I,C,A,L,P;const W=[{label:"Residents Information",showOnMobile:!1},{label:"Households",href:route("household.index"),showOnMobile:!1},{label:"Household Details",showOnMobile:!0}],E=He(),o=oe().props,p=(o==null?void 0:o.success)??null,u=(o==null?void 0:o.error)??null,{data:h,isLoading:qe,isError:ze}=Ie({queryKey:["head",s.id],queryFn:async()=>{const{data:e}=await M.get(`${E}/household/getlatesthead/${s.id}`);return(e==null?void 0:e.head)||null},enabled:!!(s!=null&&s.id),staleTime:1e3*60*5}),i=$||{},[T,q]=a.useState(i.name??""),z=e=>{e.preventDefault(),d("name",T)},d=(e,r)=>{r&&r.trim()!==""?i[e]=r:delete i[e],i.page&&delete i.page,f.get(route("household.show",{household:s.id,...i}))},B=(e,r)=>{r.key==="Enter"&&d(e,r.target.value)},m=[{key:"resident_id",label:"Resident ID"},{key:"name",label:"Resident Name"},{key:"gender",label:"Gender"},{key:"age",label:"Age"},{key:"relationship_to_head",label:"Relationship to Head"},{key:"household_position",label:"Household Position"},{key:"employment_status",label:"Employment Status"},{key:"registered_voter",label:"Register Voter"},{key:"is_pwd",label:"Is PWD"},{key:"actions",label:"Actions"}],[V,S]=a.useState(!1),[j,Y]=a.useState(null),G=async e=>{try{const r=await M.get(`${E}/resident/showresident/${e}`);Y(r.data.resident)}catch(r){console.error("Error fetching placeholders:",r)}S(!0)},[x,y]=a.useState(m.map(e=>e.key));a.useEffect(()=>{x.length===0&&y(m.map(e=>e.key))},[]);const[K,Be]=a.useState(!0),[N,Q]=a.useState(!1),g=Object.entries(i||{}).some(([e,r])=>["gender","age_group","relation","household_position","estatus","voter_status","is_pwd"].includes(e)&&r&&r!=="");a.useEffect(()=>{g&&O(!0)},[g]);const[v,O]=a.useState(g),J=()=>{window.print()},Z=e=>{f.get(route("resident.edit",e))},[ee,b]=a.useState(!1),[D,te]=a.useState(null),se=e=>{te(e),b(!0)},re=()=>{f.get(route("household.remove",D)),b(!1)},ae=e=>{if(!e)return"Unknown";const r=new Date(e),n=new Date;let l=n.getFullYear()-r.getFullYear();const c=n.getMonth()-r.getMonth();return(c<0||c===0&&n.getDate()<r.getDate())&&l--,l},ne={resident_id:e=>e.resident.id,name:e=>`${e.resident.firstname} ${e.resident.middlename??""} ${e.resident.lastname??""} ${e.resident.suffix??""}`,gender:e=>{const r=e.resident.gender,n=De[r]??"Unknown",l=Re[r]??"bg-gray-300";return t.jsx("span",{className:`py-1 px-2 rounded-xl text-sm font-medium ${l}`,children:n})},age:e=>{const r=ae(e.resident.birthdate);return typeof r!="number"?"Unknown":t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"font-medium text-gray-800",children:[r," years old"]}),r>60&&t.jsx("span",{className:"text-xs text-rose-600 font-semibold",children:"Senior Citizen"})]})},relationship_to_head:e=>Ne[e.relationship_to_head]||"",household_position:e=>je[e.household_position]||"",employment_status:e=>Se[e.resident.employment_status],registered_voter:e=>{var c;const r=((c=e.resident)==null?void 0:c.registered_voter)??0,n=ve[r]??"Unknown",l=Oe[r]??"p-1 bg-gray-300 text-black rounded-lg";return t.jsx("span",{className:l,children:n})},is_pwd:e=>{var r;return Te[(r=e.resident)==null?void 0:r.is_pwd]},actions:e=>t.jsx(ke,{actions:[{label:"View",icon:t.jsx(Me,{className:"w-4 h-4 text-indigo-600"}),onClick:()=>G(e.resident_id)},{label:"Edit",icon:t.jsx(Fe,{className:"w-4 h-4 text-green-500"}),onClick:()=>Z(e.resident_id)},{label:"Remove",icon:t.jsx(Xe,{className:"w-4 h-4 text-red-600"}),onClick:()=>se(e.resident_id)}]})};return a.useEffect(()=>{p&&F.success(p,{description:"Operation successful!",duration:3e3,closeButton:!0}),o.success=null},[p]),a.useEffect(()=>{u&&F.error(u,{description:"Operation failed!",duration:3e3,closeButton:!0}),o.error=null},[u]),t.jsxs(ce,{children:[t.jsx(ie,{title:"Family"}),t.jsx(Ae,{richColors:!0}),t.jsx(le,{breadcrumbs:W}),t.jsxs("div",{className:"bg-white shadow-md rounded-lg m-5 border border-gray-200",children:[t.jsxs("div",{className:"px-4 py-4 border-b bg-gray-100 rounded-t-lg",children:[t.jsxs("h2",{className:"text-2xl font-semibold text-gray-800",children:["House #",s.house_number]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[((k=(R=s==null?void 0:s.purok)==null?void 0:R.barangay)==null?void 0:k.barangay_name)||""," ","• Purok ",((H=s==null?void 0:s.purok)==null?void 0:H.purok_number)||""," •"," ",((I=s==null?void 0:s.street)==null?void 0:I.street_name)||""," Street"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-6",children:[{label:"Ownership Type",value:ge[s.ownership_type]},{label:"Housing Condition",value:be[s.housing_condition]},{label:"Year Established",value:s.year_established},{label:"House Structure",value:fe[s.house_structure]},{label:"Bath & Wash Area",value:Array.isArray(s.bath_and_wash_area)?s.bath_and_wash_area.map(e=>w[e]||e).join(", "):typeof s.bath_and_wash_area=="object"?Object.values(s.bath_and_wash_area).map(e=>w[e]||e).join(", "):w[s.bath_and_wash_area]||s.bath_and_wash_area},{label:"Rooms",value:s.number_of_rooms},{label:"Floors",value:s.number_of_floors},{label:"Coordinates",value:`${s.latitude}, ${s.longitude}`},{label:"Toilet Types",value:((C=s.toilets)==null?void 0:C.length)>0?s.toilets.map(e=>_e[e.toilet_type]||e.toilet_type).join(", "):"None"},{label:"Waste Management Types",value:((A=s.waste_management_types)==null?void 0:A.length)>0?s.waste_management_types.map(e=>we[e.waste_management_type]||e.waste_management_type).join(", "):"None"},{label:"Water Source Types",value:((L=s.water_source_types)==null?void 0:L.length)>0?s.water_source_types.map(e=>Ee[e.water_source_type]||e.water_source_type).join(", "):"None"},{label:"Electricity Types",value:((P=s.electricity_types)==null?void 0:P.length)>0?s.electricity_types.map(e=>he[e.electricity_type]||e.electricity_type).join(", "):"None"}].map(({label:e,value:r},n)=>t.jsxs("div",{className:"flex justify-between border-b pb-2",children:[t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[e,":"]}),t.jsx("span",{className:"text-sm text-gray-900 text-right max-w-[60%]",children:r||"—"})]},n))})]}),t.jsx("div",{className:"pt-4",children:t.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:t.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[t.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.jsx(me,{allColumns:m,visibleColumns:x,setVisibleColumns:y,onPrint:J,showFilters:v,toggleShowFilters:()=>O(e=>!e)})}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:[t.jsxs("form",{onSubmit:z,className:"flex w-[300px] max-w-lg items-center space-x-1",children:[t.jsx(ye,{type:"text",placeholder:"Search for Household Member Name",value:T,onChange:e=>q(e.target.value),onKeyDown:e=>B("name",e),className:"w-full"}),t.jsxs("div",{className:"relative group z-50",children:[t.jsx(_,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:t.jsx(Le,{})}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]})]}),t.jsx(U,{href:route("family.create"),children:t.jsxs("div",{className:"relative group z-50",children:[t.jsx(_,{variant:"outline",className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white",children:t.jsx(We,{className:"w-4 h-4"})}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Add Relationship"})]})}),h&&t.jsx(U,{href:route("resident.familytree",h.resident_id),children:t.jsxs("div",{className:"relative group z-50",children:[t.jsx(_,{variant:"outline",className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white",children:t.jsx(Ue,{className:"w-4 h-4"})}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Family Tree"})]})})]})]}),v&&t.jsx(ue,{queryParams:i,searchFieldName:d,visibleFilters:["gender","age_group","relation","household_position","estatus","voter_status","is_pwd"],showFilters:!0,clearRouteName:"household.show",clearRouteParams:{household:s.id}}),t.jsx(pe,{passedData:X,columnRenderers:ne,allColumns:m,is_paginated:K,toggleShowAll:()=>Q(!N),showAll:N,visibleColumns:x,setVisibleColumns:y})]})})}),t.jsx(de,{isOpen:V,onClose:()=>S(!1),title:"Resident Details",children:j&&t.jsx(xe,{person:j})}),t.jsx(Ce,{isOpen:ee,onClose:()=>{b(!1)},onConfirm:re,residentId:D,title:"Confirm Removal",message:"Are you sure you want to remove resident from this household? This action cannot be undone.",buttonLabel:"I UNDERSTAND, REMOVE"})]})}export{Lt as default};
