const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SeniorForm-CaiTDK5L.js","assets/app-1D8iD4Bd.js","assets/app-CkrlLrEc.css","assets/button-CIPAcQX6.js","assets/clsx-B-dksMZM.js","assets/utils-CkmPJWYF.js","assets/InputField-ukapFqiG.js","assets/InputError-3CF4LoPd.js","assets/InputLabel-D4d-A-Q6.js","assets/RadioGroup-CmY4ZP7J.js","assets/DropdownInputField-Ce50TrN3.js","assets/index-CqHJtAg4.js","assets/index-BPnZ7Gsy.js","assets/iconBase-CE4aS9vF.js","assets/rotate-ccw-SFK1L0oX.js","assets/createLucideIcon-BiNpe3Fv.js"])))=>i.map(i=>d[i]);
import{z as K,g as ue,K as pe,r as o,m as fe,S as ne,a as ae,j as r,$ as xe,L as be,R as he,_ as ge}from"./app-1D8iD4Bd.js";import{S as ye}from"./AdminLayout-D2OUv8TI.js";import{B as _e}from"./button-CIPAcQX6.js";import{I as ve}from"./input-kPHXScB2.js";import je from"./BreadcrumbsHeader-DgXCu5t1.js";import Se from"./DynamicTable-DxKJ6gLe.js";import Ne from"./DynamicTableControls-B05vB3dW.js";import ke from"./SidebarModal-BHqddiKh.js";import we from"./FillterToggle-DXovjElf.js";import Ee from"./PersonDetailContent-B_mLbqB1.js";import Ce from"./DeleteConfirmationModal-CegdaycO.js";import{u as De}from"./useAppUrl-i6TCu06O.js";import{t as T,T as ze}from"./index-CnZBewDf.js";import{R as Re,b as Te}from"./constants-DR68gslb.js";import Oe from"./ActionMenu-CnIJmyJ6.js";import{E as oe}from"./ExportButton-Cp0XZPjI.js";import{t as Ie}from"./stringFormat-Dx_XIxG1.js";import{c as ce}from"./createLucideIcon-BiNpe3Fv.js";import{S as Me}from"./search-BHnWT_Zh.js";import{E as $e}from"./eye-DasCN9Bd.js";import{S as Le}from"./square-pen-BniISOEU.js";import{T as Pe}from"./trash-2-CC2d3MMs.js";import"./sidebar-Din6F5Y0.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-DdMSQcBT.js";import"./index-CqHJtAg4.js";import"./floating-ui.react-dom-C_drr5GO.js";import"./x-CBK5N6LO.js";import"./tooltip-D3jKv7IU.js";import"./nav-user-BRbHpYkz.js";import"./avatar-afxv1LQ4.js";import"./dropdown-menu-DHdyJ-GF.js";import"./check-DT87XVe5.js";import"./chevron-right-HnAL0H-e.js";import"./file-text-I2mjrmGk.js";import"./users-round-D33dYjXx.js";import"./heart-pulse-C1qA0-se.js";import"./chevron-up-BVnRNQGF.js";import"./breadcrumb-B6RqPXZT.js";import"./react-datepicker-ByHHk_eC.js";import"./index-C7nBWhXB.js";import"./iconBase-CE4aS9vF.js";import"./index-Cqb1DdZ_.js";import"./index-5iL19m2P.js";import"./ellipsis-BYyF5agw.js";import"./file-output-DmfQFXj_.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Fe=ce("id-card",Ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Be=ce("user-check",qe);var se,le;function Ue(){if(le)return se;le=1;var y="Expected a function",U=NaN,Q="[object Symbol]",_=/^\s+|\s+$/g,O=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,C=/^0o[0-7]+$/i,x=parseInt,V=typeof K=="object"&&K&&K.Object===Object&&K,G=typeof self=="object"&&self&&self.Object===Object&&self,X=V||G||Function("return this")(),Z=Object.prototype,k=Z.toString,M=Math.max,$=Math.min,w=function(){return X.Date.now()};function L(n,l,u){var v,b,z,p,c,h,j=0,A=!1,i=!1,R=!0;if(typeof n!="function")throw new TypeError(y);l=D(l)||0,E(u)&&(A=!!u.leading,i="maxWait"in u,z=i?M(D(u.maxWait)||0,l):z,R="trailing"in u?!!u.trailing:R);function F(a){var f=v,N=b;return v=b=void 0,j=a,p=n.apply(N,f),p}function q(a){return j=a,c=setTimeout(S,l),A?F(a):p}function W(a){var f=a-h,N=a-j,H=l-f;return i?$(H,z-N):H}function J(a){var f=a-h,N=a-j;return h===void 0||f>=l||f<0||i&&N>=z}function S(){var a=w();if(J(a))return Y(a);c=setTimeout(S,W(a))}function Y(a){return c=void 0,R&&v?F(a):(v=b=void 0,p)}function te(){c!==void 0&&clearTimeout(c),j=0,v=h=b=c=void 0}function re(){return c===void 0?p:Y(w())}function B(){var a=w(),f=J(a);if(v=arguments,b=this,h=a,f){if(c===void 0)return q(h);if(i)return c=setTimeout(S,l),F(h)}return c===void 0&&(c=setTimeout(S,l)),p}return B.cancel=te,B.flush=re,B}function E(n){var l=typeof n;return!!n&&(l=="object"||l=="function")}function P(n){return!!n&&typeof n=="object"}function ee(n){return typeof n=="symbol"||P(n)&&k.call(n)==Q}function D(n){if(typeof n=="number")return n;if(ee(n))return U;if(E(n)){var l=typeof n.valueOf=="function"?n.valueOf():n;n=E(l)?l+"":l}if(typeof n!="string")return n===0?n:+n;n=n.replace(_,"");var u=I.test(n);return u||C.test(n)?x(n.slice(2),u?2:8):O.test(n)?U:+n}return se=L,se}var Ve=Ue();const Ge=ue(Ve),We=he.lazy(()=>ge(()=>import("./SeniorForm-CaiTDK5L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])));function Ft({seniorCitizens:y,puroks:U,queryParams:Q={}}){const _=pe().props,O=(_==null?void 0:_.success)??null,I=(_==null?void 0:_.error)??null,C=De(),[x,V]=o.useState(()=>({...Q})),[G,X]=o.useState(x.name??""),[Z,k]=o.useState(!1),[M,$]=o.useState(null),[w,L]=o.useState(null),[E,P]=o.useState(null),[ee,D]=o.useState(!1),[n,l]=o.useState(null),[u,v]=o.useState(!1),[b,z]=o.useState({}),p=o.useMemo(()=>[{key:"id",label:"ID"},{key:"purok_number",label:"Purok"},{key:"name",label:"Senior Name"},{key:"sex",label:"Sex"},{key:"birthdate",label:"Birthdate"},{key:"age",label:"Age"},{key:"is_pensioner",label:"Pensioner"},{key:"osca_id_number",label:"OSCA Number"},{key:"pension_type",label:"Pension Type"},{key:"living_alone",label:"Living Alone"},{key:"registered_senior",label:"Registered Senior"},{key:"actions",label:"Actions"}],[]),[c,h]=o.useState(()=>{try{const e=localStorage.getItem("household_visible_columns");return e?JSON.parse(e):p.map(t=>t.key)}catch{return p.map(e=>e.key)}});o.useEffect(()=>{localStorage.setItem("household_visible_columns",JSON.stringify(c))},[c]);const j=o.useCallback(e=>{if(!e)return"Unknown";const t=new Date(e),s=new Date;let m=s.getFullYear()-t.getFullYear();const g=s.getMonth()-t.getMonth();return(g<0||g===0&&s.getDate()<t.getDate())&&m--,m},[]),{data:A,setData:i,post:R,errors:F,reset:q,clearErrors:W}=fe({resident_id:null,resident_image:null,resident_name:"",gender:null,birthdate:null,purok_number:null,osca_id_number:"",is_pensioner:null,pension_type:null,living_alone:null,senior_id:null,_method:void 0}),J=o.useMemo(()=>Ge(e=>{const t={...x};e&&e.trim()!==""?t.name=e:delete t.name,t.page&&delete t.page,V(t),ne.get(route("senior_citizen.index",t),{},{preserveState:!0,preserveScroll:!0})},450),[x]),S=(e,t)=>{const s={...x};t&&t.trim()!==""?s[e]=t:delete s[e],s.page&&delete s.page,V(s),ne.get(route("senior_citizen.index",s),{},{preserveState:!0,preserveScroll:!0})},Y=e=>{e.preventDefault(),S("name",G)},te=(e,t)=>{t.key==="Enter"&&S(e,t.target.value)},re=o.useCallback(async e=>{try{if(b[e])$(b[e]);else{const t=await ae.get(`${C}/resident/showresident/${e}`);z(s=>({...s,[e]:t.data.resident})),$(t.data.resident)}k(!0)}catch(t){console.error("Error fetching resident:",t),T.error("Failed to fetch resident details")}},[b,C]),B=e=>{var s;const t=(s=(y==null?void 0:y.data)??y)==null?void 0:s.find(m=>m.id==e);t&&(k(!0),L(t),i("resident_id",t.id),i("resident_name",`${t.firstname} ${t.middlename??""} ${t.lastname??""} ${t.suffix??""}`),i("purok_number",t.purok_number),i("birthdate",t.birthdate),i("resident_image",t.resident_picture_path))},a=e=>{e.preventDefault(),R(route("senior_citizen.store"),{onError:t=>{console.error("Validation Errors:",t);const s=Object.values(t);T.error("Validation Error",{description:r.jsx("ul",{children:s.map((m,g)=>r.jsx("li",{children:m},g))})})}})},f=e=>{e.preventDefault(),R(route("senior_citizen.update",A.senior_id),{onError:t=>{console.error("Validation Errors:",t);const s=Object.values(t);T.error("Validation Error",{description:r.jsx("ul",{children:s.map((m,g)=>r.jsx("li",{children:m},g))})})}})},N=o.useCallback(async e=>{var t,s,m,g;try{const d=(await ae.get(`${C}/senior_citizen/seniordetails/${e}`)).data.seniordetails;P(d),i("resident_id",d.id),i("resident_name",`${d.firstname} ${d.middlename??""} ${d.lastname??""} ${d.suffix??""}`),i("purok_number",d.purok_number),i("birthdate",d.birthdate),i("resident_image",d.resident_picture_path),i("osca_id_number",(t=d.seniorcitizen)!=null&&t.osca_id_number?d.seniorcitizen.osca_id_number.toString():""),i("is_pensioner",((s=d.seniorcitizen)==null?void 0:s.is_pensioner)||""),i("pension_type",((m=d.seniorcitizen)==null?void 0:m.pension_type)||""),i("living_alone",((g=d.seniorcitizen)==null?void 0:g.living_alone)||""),i("senior_id",d.seniorcitizen.id),i("_method","PUT"),k(!0)}catch(ie){console.error("Error fetching senior details:",ie),T.error("Failed to fetch senior details")}},[C,i]),H=e=>{l(e),D(!0)},de=()=>{ne.delete(route("senior_citizen.destroy",n)),D(!1)},me=o.useMemo(()=>({id:e=>e.id,purok_number:e=>r.jsx("span",{className:"text-gray-800",children:e.purok_number}),name:e=>r.jsxs(xe,{href:route("resident.edit",e.id),className:"hover:text-blue-500 hover:underline",children:[Ie(`${e.firstname} ${e.middlename??""} ${e.lastname??""}`),e.suffix?`, ${e.suffix}`:""]}),sex:e=>{const t=e.sex,s=Re[t]??"Unknown",m=Te[t]??"bg-gray-300";return r.jsx("span",{className:`py-1 px-2 rounded-xl text-sm font-medium whitespace-nowrap ${m}`,children:s})},birthdate:e=>{const t=e.birthdate;return t?new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):r.jsx("span",{className:"text-gray-400 italic",children:"N/A"})},age:e=>j(e.birthdate),is_pensioner:e=>{var t;return e.seniorcitizen==null?r.jsx("span",{className:"text-yellow-600 font-medium",children:"Pending"}):((t=e.seniorcitizen.is_pensioner)==null?void 0:t.toLowerCase())==="yes"?r.jsx("span",{className:"text-green-600 font-medium",children:"Yes"}):r.jsx("span",{className:"text-gray-500",children:"No"})},osca_id_number:e=>{var t;return(t=e.seniorcitizen)!=null&&t.osca_id_number?r.jsx("span",{className:"text-gray-800",children:e.seniorcitizen.osca_id_number}):r.jsx("span",{className:"text-gray-400 italic",children:"Not Assigned"})},pension_type:e=>{var s;const t=(s=e.seniorcitizen)==null?void 0:s.pension_type;return!t||t.toLowerCase()==="none"?r.jsx("span",{className:"text-gray-400 italic",children:"None"}):r.jsx("span",{className:"text-gray-800",children:t})},living_alone:e=>{var t;return((t=e.seniorcitizen)==null?void 0:t.living_alone)==1?r.jsx("span",{className:"text-red-600 font-medium",children:"Yes"}):r.jsx("span",{className:"text-gray-500",children:"No"})},registered_senior:e=>e.seniorcitizen?r.jsx("span",{className:"text-green-600 font-medium",children:"Yes"}):r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"text-red-500 italic",children:"No"})}),actions:e=>{const t=!!e.seniorcitizen,s=[{label:"View",icon:r.jsx($e,{className:"w-4 h-4 text-indigo-600"}),onClick:()=>re(e.id)}];return t?s.push({label:"Edit",icon:r.jsx(Le,{className:"w-4 h-4 text-green-500"}),onClick:()=>N(e.id)},{label:"Delete",icon:r.jsx(Pe,{className:"w-4 h-4 text-red-600"}),onClick:()=>H(e.seniorcitizen.id)}):s.push({label:"Register",icon:r.jsx(Be,{className:"w-4 h-4 text-blue-500"}),onClick:()=>B(e.id)}),r.jsx("div",{className:"max-w-[140px] sm:max-w-none overflow-hidden",children:r.jsx(Oe,{actions:s})})}}),[j,N]);return o.useEffect(()=>{O&&(k(!1),q(),W(),L(null),P(null),T.success(O,{description:"Operation successful!"}))},[O]),o.useEffect(()=>{I&&T.error(I,{description:"Operation failed!"})},[I]),r.jsxs(ye,{children:[r.jsx(be,{title:"Senior Citizen"}),r.jsx(je,{breadcrumbs:[{label:"Residents Information",showOnMobile:!1},{label:"Senior Citizen",showOnMobile:!0}]}),r.jsx(ze,{richColors:!0}),r.jsx("div",{className:"p-2 md:p-4",children:r.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:r.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-xl shadow-sm",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:r.jsx(Fe,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900",children:"Senior Citizen Records"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Manage and track senior citizen information. Quickly search, filter, or export records to support programs and services."})]})]})}),r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[r.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[r.jsx(Ne,{allColumns:p,visibleColumns:c,setVisibleColumns:h,showFilters:u,toggleShowFilters:()=>v(e=>!e)}),r.jsx(oe,{url:"report/export-seniorcitizen-excel",queryParams:x}),r.jsx(oe,{url:"report/export-seniorcitizen-pdf",queryParams:x,type:"pdf",totalRecords:y.total})]}),r.jsx("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:r.jsxs("form",{onSubmit:Y,className:"flex w-[300px] max-w-lg items-center space-x-1",children:[r.jsx(ve,{type:"text",placeholder:"Search Name",value:G,onChange:e=>{X(e.target.value),J(e.target.value)},onKeyDown:e=>te("name",e),className:"w-full"}),r.jsxs("div",{className:"relative group z-50",children:[r.jsx(_e,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:r.jsx(Me,{})}),r.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]})]})})]}),u&&r.jsx(we,{queryParams:x,searchFieldName:S,visibleFilters:["purok","sex","gender","is_pensioner","pension_type","living_alone","birth_month","is_registered"],puroks:U,showFilters:!0,pensionTypes:[{label:"SSS",value:"SSS"},{label:"DSWD",value:"DSWD"},{label:"GSIS",value:"GSIS"},{label:"private",value:"private"},{label:"none",value:"none"}],months:[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],clearRouteName:"senior_citizen.index",clearRouteParams:{}}),r.jsx(Se,{passedData:y,columnRenderers:me,allColumns:p,visibleColumns:c,showTotal:!0})]})})}),r.jsxs(ke,{isOpen:Z,onClose:()=>{k(!1),q(),W(),L(null),$(null),P(null)},title:w?"Register Senior Citizen":E?"Edit Senior Citizen Details":M?"Resident Details":"",children:[M&&r.jsx(Ee,{person:M}),(w!=null||E!=null)&&r.jsx(o.Suspense,{fallback:r.jsx("div",{children:"Loading form..."}),children:r.jsx(We,{data:A,errors:F,setData:i,reset:q,onSubmit:E?f:a,registerSenior:w})})]}),r.jsx(Ce,{isOpen:ee,onClose:()=>D(!1),onConfirm:de,residentId:n})]})}export{Ft as default};
