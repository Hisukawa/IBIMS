import{K as T,r as i,j as t,L as D,S as F}from"./app-CrbrQTbj.js";import{S as I}from"./AdminLayout-AGCCpBdO.js";import{B as E}from"./button-BWYVbxHt.js";import{I as M}from"./input-B0va7EqN.js";import O from"./BreadcrumbsHeader-QIr5CkCm.js";import{T as R}from"./index-BygE6TMw.js";import{u as B}from"./useAppUrl-BoX8ZIym.js";import U from"./DynamicTableControls-BjTuzxTt.js";import V from"./FillterToggle-Gdzgye8-.js";import z from"./DynamicTable-DI5CJAml.js";import{t as K}from"./stringFormat-Dx_XIxG1.js";import{A as h}from"./constants-21YuajDo.js";import{E as H}from"./ExportButton-wXvthV4P.js";import{c as $}from"./createLucideIcon-Br_pg0F7.js";import{S as J}from"./search-BF7_Cuti.js";import"./sidebar-BklaI4Dr.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-9Tt-JjyO.js";import"./index-DIi6Z56V.js";import"./floating-ui.react-dom-nSB1FjTE.js";import"./x-W7JH4u8u.js";import"./tooltip-4ofyRQDl.js";import"./nav-user-3vor-CPU.js";import"./avatar-ClwpyCmP.js";import"./dropdown-menu-Tq8a0yXY.js";import"./check-BXs0fvED.js";import"./chevron-right-Cio6xGfx.js";import"./DeleteConfirmationModal-BuMSvNeY.js";import"./file-text-GKhMtBq5.js";import"./users-round-CDG1twOV.js";import"./heart-pulse-hj0nkcsT.js";import"./chevron-up-DHBx5s3E.js";import"./breadcrumb-BB2fnuWd.js";import"./react-datepicker-CJEE3-Fw.js";import"./index-BGTkwgMY.js";import"./file-output-BrLFZskv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Y=$("clipboard-list",Q);function Fe({activity_logs:g,queryParams:a,action_types:f,roles:b,modules:y}){const j=[{label:"Activity Logs",showOnMobile:!0}];a=a||{},B();const r=T().props;r==null||r.success,r==null||r.error;const[c,v]=i.useState(a.name??""),N=e=>{e.preventDefault(),o("name",c)},o=(e,s)=>{s&&s.trim()!==""?a[e]=s:delete a[e],a.page&&delete a.page,F.get(route("activity_log.index",a))},_=(e,s)=>{if(s.key==="Enter")o(e,s.target.value);else return},l=[{key:"id",label:"ID"},{key:"user_name",label:"User"},{key:"role",label:"Role"},{key:"module",label:"Module"},{key:"action_type",label:"Action Type"},{key:"description",label:"Description"},{key:"created_at",label:"Date & Time"}],n=Object.entries(a||{}).some(([e,s])=>["action","role","module","start_date_logs","end_date_logs"].includes(e)&&s&&s!=="");i.useEffect(()=>{n&&d(!0)},[n]);const[m,d]=i.useState(n),[w,G]=i.useState(!0),[p,S]=i.useState(!1),k={id:e=>t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:e.id}),user_name:e=>t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:e.user_name??"—"}),role:e=>{var s;return t.jsx("span",{className:`text-xs font-medium ${e.role==="admin"?"text-indigo-600":e.role==="user"?"text-green-600":"text-gray-400"}`,children:((s=e.role)==null?void 0:s.toUpperCase())??"—"})},module:e=>t.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e.module??"—"}),action_type:e=>{var u;const s=((u=e.action_type)==null?void 0:u.toLowerCase().trim())??"default",L=h[s]??h.default;return t.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${L}`,children:K(e.action_type??"—")})},description:e=>t.jsx("span",{className:"text-xs text-gray-600",children:e.description??"—"}),created_at:e=>{const s=e.created_at?new Date(e.created_at).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return t.jsx("span",{className:"text-xs text-gray-500",children:s})}},C=l.map(e=>e.key),[x,A]=i.useState(()=>{const e=localStorage.getItem("activity_logs_visible_columns");return e?JSON.parse(e):C});return t.jsxs(I,{children:[t.jsx(D,{title:"Activity Logs"}),t.jsxs("div",{children:[t.jsx(R,{richColors:!0}),t.jsx(O,{breadcrumbs:j}),t.jsx("div",{className:"p-2 md:p-4",children:t.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:t.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[t.jsx("section",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-orange-50 rounded-xl shadow-sm border border-orange-100",children:[t.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:t.jsx(Y,{className:"w-6 h-6 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-gray-900",children:"Activity Logs"}),t.jsxs("p",{className:"text-sm text-gray-500",children:["View and monitor all system activities performed by"," ",t.jsx("span",{className:"font-medium",children:"users, admins, and residents"}),". Track actions such as"," ",t.jsx("span",{className:"font-medium",children:"create, update, delete, login,"})," ","and other events for auditing and accountability."]})]})]})}),t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[t.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[t.jsx(U,{allColumns:l,visibleColumns:x,setVisibleColumns:A,showFilters:m,toggleShowFilters:()=>d(e=>!e)}),t.jsx(H,{url:"report/export-activity-logs-excel",queryParams:a})]}),t.jsx("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:t.jsxs("form",{onSubmit:N,className:"flex w-[380px] max-w-lg items-center space-x-1",children:[t.jsx(M,{type:"text",placeholder:"Search Logs",value:c,onChange:e=>v(e.target.value),onKeyDown:e=>_("name",e.target.value),className:"w-full"}),t.jsxs("div",{className:"relative group z-50",children:[t.jsx(E,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:t.jsx(J,{})}),t.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]})]})})]}),m&&t.jsx(V,{queryParams:a,searchFieldName:o,visibleFilters:["action","role","module","start_date_logs","end_date_logs"],showFilters:!0,clearRouteName:"activity_log.index",clearRouteParams:{},action_types:f,roles:b,modules:y}),t.jsx(z,{passedData:g,allColumns:l,columnRenderers:k,queryParams:a,is_paginated:w,toggleShowAll:()=>S(!p),showAll:p,visibleColumns:x})]})})})]})]})}export{Fe as default};
