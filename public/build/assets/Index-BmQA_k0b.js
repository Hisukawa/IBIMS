import{K as B,m as E,r as _,j as e,L as R}from"./app-DVhHKceu.js";import{S as P}from"./AdminLayout-D0sC5JT2.js";import{B as z}from"./button-DfrzF4oB.js";import M from"./BreadcrumbsHeader-BOTKyet8.js";import{D as L}from"./DropdownInputField-yTdi7pAe.js";import{I as O}from"./InputField-DGyIIZlZ.js";import"./switch-DNOlfmbn.js";import{t as j,T as D}from"./index-BIDuIF_4.js";import{S as p}from"./SelectField-BEaRxxhS.js";import{I as m}from"./InputError-Dahw0x2B.js";import"./sidebar-K7x0cCuu.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./input-DI_P0oWt.js";import"./index-DOzM7Fz1.js";import"./index-Mm7um0dn.js";import"./floating-ui.react-dom-C9cXVMc4.js";import"./x-CpxUt9D4.js";import"./createLucideIcon-CGCDWw9Z.js";import"./tooltip-DThexwto.js";import"./nav-user-CDXrXDiW.js";import"./avatar-CIwmait0.js";import"./dropdown-menu-CRNvyBO0.js";import"./check-laVA1vCp.js";import"./chevron-right-kD52VDCw.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-Cd6ZdUus.js";import"./DeleteConfirmationModal-CBdJpO15.js";import"./file-text-DWv0TTsR.js";import"./users-round-BUGcHed6.js";import"./heart-pulse-CHOY6Xci.js";import"./chevron-up-BUE3ocJI.js";import"./breadcrumb-BCdKU_pt.js";import"./index-Cs8M8Hss.js";const n=({label:a,value:x,onChange:d,error:g,helper:l,...u})=>e.jsxs("div",{children:[e.jsx(O,{label:a,value:x,onChange:d,...u}),e.jsx(m,{message:g}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l})]});function fe({details:a,puroks:x,streets:d}){var b,v,f;const g=[{label:"Basic Information",showOnMobile:!0}],l=B().props,u=(l==null?void 0:l.success)??null,h=(l==null?void 0:l.error)??null,{data:i,setData:t,post:y,errors:s,processing:N}=E({resident_id:a.id||null,firstname:a.firstname||"",middlename:a.middlename||"",lastname:a.lastname||"",maiden_name:a.maiden_name||"",suffix:a.suffix||"",birthdate:a.birthdate||null,birthplace:a.birthplace||"",sex:a.sex||"",civil_status:a.civil_status||"",registered_voter:!!a.registered_voter,contact_number:a.contact_number||"",email:a.email||"",citizenship:a.citizenship||"",religion:a.religion||"",residency_type:a.residency_type||"",residency_date:a.residency_date||"",purok_number:((b=a.purok_number)==null?void 0:b.toString())||"",street_id:((v=a.street_id)==null?void 0:v.toString())||"",street_name:((f=a.street)==null?void 0:f.street_name)||"",ethnicity:a.ethnicity||"",_method:"PUT"}),C=a!=null&&a.resident_picture_path?"/storage/"+a.resident_picture_path:null,S=x.map(r=>({label:"Purok "+r,value:r.toString()})),w=d.map(r=>({label:r.street_name,value:r.id.toString()})),I=r=>{r.preventDefault(),y(route("resident_account.update.info",i.resident_id),{onError:c=>{console.log(c)}})},k=r=>{const c=Number(r.target.value),o=d.find(F=>F.id==c);o&&(t("street_id",o.id),t("street_name",(o==null?void 0:o.street_name)||""),t("purok_id",o.purok.id),t("purok_number",o.purok.purok_number))};return _.useEffect(()=>{u&&j.success(u,{description:"Operation successful!",duration:3e3,closeButton:!0}),l.success=null},[u]),_.useEffect(()=>{h&&j.error(h,{description:"Operation failed!",duration:3e3,closeButton:!0}),l.error=null},[h]),e.jsxs(P,{children:[e.jsx(D,{richColors:!0}),e.jsx(R,{title:"Resident Basic Information"}),e.jsx(M,{breadcrumbs:g}),e.jsx("div",{className:"p-3 md:p-6 bg-gray-50 min-h-screen",children:e.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-4 lg:px-6",children:e.jsxs("form",{onSubmit:I,className:"space-y-12",children:[e.jsxs("div",{className:"bg-white border rounded-2xl shadow-md p-6 md:p-10 space-y-10",children:[e.jsxs("div",{className:"space-y-2 border-b pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-2.5 h-2.5 bg-blue-600 rounded-full"}),"Personal Information"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Kindly provide accurate and updated information for barangay documentation."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:i.resident_image instanceof File?URL.createObjectURL(i.resident_image):C||"/images/default-avatar.jpg",alt:"Resident Image",className:"w-32 h-32 object-cover rounded-full border shadow-sm ring-2 ring-gray-100"}),e.jsx("label",{htmlFor:"resident_image",className:"absolute bottom-0 right-0 bg-blue-600 text-white text-xs rounded-full p-1.5 cursor-pointer hover:bg-blue-700 transition",children:"Upload"})]}),e.jsx("input",{id:"resident_image",type:"file",accept:"image/*",onChange:r=>{const c=r.target.files[0];c&&t("resident_image",c)},className:"hidden"}),e.jsx(m,{message:s.resident_image}),e.jsx("p",{className:"text-xs text-gray-500 text-center max-w-xs",children:"Preferred formats: JPG/PNG â€¢ Maximum size: 5MB"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(n,{label:"First Name",value:i.firstname,error:s.firstname,helper:"Resident's legal first name",onChange:r=>t("firstname",r.target.value)}),e.jsx(n,{label:"Middle Name",value:i.middlename,error:s.middlename,helper:"Leave blank if none",onChange:r=>t("middlename",r.target.value)}),e.jsx(n,{label:"Last Name",value:i.lastname,error:s.lastname,helper:"Resident's family name",onChange:r=>t("lastname",r.target.value)}),e.jsx(n,{label:"Maiden Name",value:i.maiden_name,error:s.maiden_name,helper:"For married women only",onChange:r=>t("maiden_name",r.target.value)}),e.jsx(n,{label:"Suffix",value:i.suffix,error:s.suffix,helper:"Ex: Jr., Sr., III",onChange:r=>t("suffix",r.target.value)}),e.jsx(n,{type:"date",label:"Birthdate",value:i.birthdate,error:s.birthdate,helper:"Select date of birth",onChange:r=>t("birthdate",r.target.value)}),e.jsx(n,{label:"Birthplace",value:i.birthplace,error:s.birthplace,helper:"City / Province",onChange:r=>t("birthplace",r.target.value)}),e.jsx(p,{label:"Sex",value:i.sex,items:[{value:"male",label:"Male"},{value:"female",label:"Female"}],onChange:r=>t("sex",r)}),e.jsx(m,{message:s.sex}),e.jsx(p,{label:"Civil Status",value:i.civil_status,items:[{value:"single",label:"Single"},{value:"married",label:"Married"},{value:"widowed",label:"Widowed"},{value:"annulled",label:"Annulled"}],onChange:r=>t("civil_status",r)}),e.jsx(m,{message:s.civil_status}),e.jsx(n,{label:"Contact Number",value:i.contact_number,error:s.contact_number,helper:"Format: 09xxxxxxxxx",onChange:r=>t("contact_number",r.target.value)}),e.jsx(n,{label:"Email",value:i.email,error:s.email,helper:"Optional",onChange:r=>t("email",r.target.value)}),e.jsx(n,{label:"Citizenship",value:i.citizenship,error:s.citizenship,helper:"Ex: Filipino",onChange:r=>t("citizenship",r.target.value)}),e.jsx(n,{label:"Religion",value:i.religion,error:s.religion,helper:"Optional",onChange:r=>t("religion",r.target.value)}),e.jsx(n,{label:"Ethnicity",value:i.ethnicity,error:s.ethnicity,helper:"Optional",onChange:r=>t("ethnicity",r.target.value)}),e.jsx(p,{label:"Residency Type",value:i.residency_type,items:[{value:"permanent",label:"Permanent"},{value:"temporary",label:"Temporary"}],onChange:r=>t("residency_type",r)}),e.jsx(m,{message:s.residency_type}),e.jsx(n,{type:"number",label:"Residency Year",value:i.residency_date||"",error:s.residency_date,helper:"Year resident moved in (ex: 1970)",min:"1900",max:new Date().getFullYear(),onChange:r=>t("residency_date",r.target.value)}),e.jsx(p,{label:"Purok Number",name:"purok_number",value:i.purok_number||"",onChange:r=>t("purok_number",r.target.value),items:S}),e.jsx(m,{message:s.purok_number}),e.jsx(L,{label:"Street Name",name:"street_id",value:i.street_name,placeholder:"Ex: Rizal St., Mabini Avenue",items:w,onChange:r=>k(r)}),e.jsx(m,{message:s.street_id})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(z,{disabled:N,className:"px-6 py-3 text-base",children:"Save Changes"})})]})})})]})}export{fe as default};
