import{c as le,j as l,$ as ae,r as oe,K as ce,U as de}from"./app-CxQIk-Ug.js";import{c as ue}from"./createLucideIcon-DUzL0oSb.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]],he=ue("clipboard-x",pe);var ee={exports:{}},me=ee.exports,se;function fe(){return se||(se=1,function(h,M){(function(A,v){h.exports=v(le())})(typeof self<"u"?self:me,function(A){return function(){var v={155:function(e){e.exports=A}},j={};function b(e){var t=j[e];if(t!==void 0)return t.exports;var o=j[e]={exports:{}};return v[e](o,o.exports,b),o.exports}b.d=function(e,t){for(var o in t)b.o(t,o)&&!b.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},b.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},b.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var C={};b.r(C),b.d(C,{useReactToPrint:function(){return ne}});var K=b(155);function m({level:e="error",messages:t,suppressErrors:o=!1}){o||(e==="error"?console.error(t):e==="warning"?console.warn(t):console.debug(t))}function Q(e,t){if(t||!e){const o=document.getElementById("printWindow");o&&document.body.removeChild(o)}}function R(e){return e instanceof Error?e:new Error("Unknown Error")}function _(e,t){const{documentTitle:o,onAfterPrint:c,onPrintError:i,preserveAfterPrint:a,print:g,suppressErrors:x}=t;setTimeout(()=>{var p,w;if(e.contentWindow){let P=function(){c==null||c(),Q(a)};if(e.contentWindow.focus(),g)g(e).then(P).catch(E=>{i?i("print",R(E)):m({messages:["An error was thrown by the specified `print` function"],suppressErrors:x})});else{if(e.contentWindow.print){const E=(w=(p=e.contentDocument)===null||p===void 0?void 0:p.title)!==null&&w!==void 0?w:"",N=e.ownerDocument.title;o&&(e.ownerDocument.title=o,e.contentDocument&&(e.contentDocument.title=o)),e.contentWindow.print(),o&&(e.ownerDocument.title=N,e.contentDocument&&(e.contentDocument.title=E))}else m({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:x});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(E=>{var N,L;return((L=(N=navigator.userAgent)!==null&&N!==void 0?N:navigator.vendor)!==null&&L!==void 0?L:"opera"in window&&window.opera).match(E)})?setTimeout(P,500):P()}}else m({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:x})},500)}function te(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let c=o.nextNode();for(;c;)t.push(c),c=o.nextNode();return t}function z(e,t,o){const c=te(e),i=te(t);if(c.length===i.length)for(let a=0;a<c.length;a++){const g=c[a],x=i[a],p=g.shadowRoot;if(p!==null){const w=x.attachShadow({mode:p.mode});w.innerHTML=p.innerHTML,z(p,w,o)}}else m({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:o})}const re=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function G(e,t,o,c){var i,a,g,x,p;const{contentNode:w,clonedContentNode:P,clonedImgNodes:E,clonedVideoNodes:N,numResourcesToLoad:L,originalCanvasNodes:X}=o,{bodyClass:Y,fonts:W,ignoreGlobalStyles:D,pageStyle:U,nonce:F,suppressErrors:d,copyShadowRoots:I}=c;e.onload=null;const u=(i=e.contentDocument)!==null&&i!==void 0?i:(a=e.contentWindow)===null||a===void 0?void 0:a.document;if(u){const O=u.body.appendChild(P);I&&z(w,O,!!d),W&&(!((g=e.contentDocument)===null||g===void 0)&&g.fonts&&(!((x=e.contentWindow)===null||x===void 0)&&x.FontFace)?W.forEach(r=>{const n=new FontFace(r.family,r.source,{weight:r.weight,style:r.style});e.contentDocument.fonts.add(n),n.loaded.then(()=>{t(n)}).catch(y=>{t(n,["Failed loading the font:",n,"Load error:",R(y)])})}):(W.forEach(r=>{t(r)}),m({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:d})));const V=U??re,q=u.createElement("style");F&&(q.setAttribute("nonce",F),u.head.setAttribute("nonce",F)),q.appendChild(u.createTextNode(V)),u.head.appendChild(q),Y&&u.body.classList.add(...Y.split(" "));const T=u.querySelectorAll("canvas");for(let r=0;r<X.length;++r){const n=X[r],y=T[r];if(y===void 0){m({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",n],suppressErrors:d});continue}const s=y.getContext("2d");s&&s.drawImage(n,0,0)}for(let r=0;r<E.length;r++){const n=E[r],y=n.getAttribute("src");if(y){const s=new Image;s.onload=()=>{t(n)},s.onerror=(f,S,B,k,H)=>{t(n,["Error loading <img>",n,"Error",H])},s.src=y}else t(n,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',n])}for(let r=0;r<N.length;r++){const n=N[r];n.preload="auto";const y=n.getAttribute("poster");if(y){const s=new Image;s.onload=()=>{t(n)},s.onerror=(f,S,B,k,H)=>{t(n,["Error loading video poster",y,"for video",n,"Error:",H])},s.src=y}else n.readyState>=2?t(n):n.src?(n.onloadeddata=()=>{t(n)},n.onerror=(s,f,S,B,k)=>{t(n,["Error loading video",n,"Error",k])},n.onstalled=()=>{t(n,["Loading video stalled, skipping",n])}):t(n,["Error loading video, `src` is empty",n])}const $="select",J=w.querySelectorAll($),Z=u.querySelectorAll($);for(let r=0;r<J.length;r++)Z[r].value=J[r].value;if(!D){const r=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let n=0,y=r.length;n<y;++n){const s=r[n];if(s.tagName.toLowerCase()==="style"){const f=u.createElement(s.tagName),S=s.sheet;if(S){let B="";try{const k=S.cssRules.length;for(let H=0;H<k;++H)typeof S.cssRules[H].cssText=="string"&&(B+=`${S.cssRules[H].cssText}\r
`)}catch(k){m({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",s,`Original error: ${R(k).message}`],level:"warning"})}f.setAttribute("id",`react-to-print-${n}`),F&&f.setAttribute("nonce",F),f.appendChild(u.createTextNode(B)),u.head.appendChild(f)}}else if(s.getAttribute("href"))if(s.hasAttribute("disabled"))m({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",s],level:"warning"}),t(s);else{const f=u.createElement(s.tagName);for(let S=0,B=s.attributes.length;S<B;++S){const k=s.attributes[S];k&&f.setAttribute(k.nodeName,(p=k.nodeValue)!==null&&p!==void 0?p:"")}f.onload=()=>{t(f)},f.onerror=(S,B,k,H,ie)=>{t(f,["Failed to load",f,"Error:",ie])},F&&f.setAttribute("nonce",F),u.head.appendChild(f)}else m({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",s],level:"warning"}),t(s)}}}L===0&&_(e,c)}function ne({bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:c,fonts:i,ignoreGlobalStyles:a,nonce:g,onAfterPrint:x,onBeforePrint:p,onPrintError:w,pageStyle:P,preserveAfterPrint:E,print:N,suppressErrors:L}){return(0,K.useCallback)(X=>{function Y(){const W={bodyClass:e,contentRef:t,copyShadowRoots:o,documentTitle:c,fonts:i,ignoreGlobalStyles:a,nonce:g,onAfterPrint:x,onPrintError:w,pageStyle:P,preserveAfterPrint:E,print:N,suppressErrors:L},D=function(){const d=document.createElement("iframe");return d.width=`${document.documentElement.clientWidth}px`,d.height=`${document.documentElement.clientHeight}px`,d.style.position="absolute",d.style.top=`-${document.documentElement.clientHeight+100}px`,d.style.left=`-${document.documentElement.clientWidth+100}px`,d.id="printWindow",d.srcdoc="<!DOCTYPE html>",d}(),U=function(d,I){const{contentRef:u,fonts:O,ignoreGlobalStyles:V,suppressErrors:q}=I,T=function({contentRef:y,optionalContent:s,suppressErrors:f}){return!s||s instanceof Event||(y&&m({level:"warning",messages:['"react-to-print" received a `contentRef` option and a optional-content param passed to its callback. The `contentRef` option will be ignored.']}),typeof s!="function")?y?y.current:void m({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:f}):s()}({contentRef:u,optionalContent:d,suppressErrors:q});if(!T)return;const $=T.cloneNode(!0),J=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),Z=$.querySelectorAll("img"),r=$.querySelectorAll("video"),n=O?O.length:0;return{contentNode:T,clonedContentNode:$,clonedImgNodes:Z,clonedVideoNodes:r,numResourcesToLoad:(V?0:J.length)+Z.length+r.length+n,originalCanvasNodes:T.querySelectorAll("canvas")}}(X,W);if(!U)return void m({messages:["There is nothing to print"],suppressErrors:L});const F=function(d,I,u){const{suppressErrors:O}=d,V=[],q=[];return function(T,$){V.includes(T)?m({level:"debug",messages:["Tried to mark a resource that has already been handled",T],suppressErrors:O}):($?(m({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...$],suppressErrors:O}),q.push(T)):V.push(T),V.length+q.length===I&&_(u,d))}}(W,U.numResourcesToLoad,D);(function(d,I,u,O){d.onload=()=>{G(d,I,u,O)},document.body.appendChild(d)})(D,F,U,W)}Q(E,!0),p?p().then(()=>{Y()}).catch(W=>{w==null||w("onBeforePrint",R(W))}):Y()},[e,t,o,c,i,a,g,x,p,w,P,E,N,L])}return C}()})}(ee)),ee.exports}var ge=fe();function ye({links:h,queryParams:M}){if(M=M||{},!Array.isArray(h))return null;const A=v=>{if(!v.url)return null;const j=new URL(v.url,window.location.origin);for(const[b,C]of Object.entries(M))b!=="page"&&j.searchParams.set(b,C);return j.pathname+j.search};return l.jsx("nav",{className:"text-center mt-4 space-x-1",children:h.map((v,j)=>{const b=A(v);return l.jsx(ae,{href:b||"#",className:"inline-block py-2 px-3 rounded-lg text-gray-700 text-xs "+(v.active?"bg-blue-400 text-white ":"")+(v.url?"hover:bg-blue-300 ":" !text-gray-400 cursor-not-allowed "),dangerouslySetInnerHTML:{__html:v.label}},j)})})}const xe=({passedData:h,allColumns:M,columnRenderers:A,children:v,queryParams:j=null,showTotal:b=!1,visibleColumns:C=[]})=>{var e,t;const K=oe.useRef();ge.useReactToPrint({content:()=>K.current});const{props:m}=ce(),Q=(t=(e=m==null?void 0:m.auth)==null?void 0:e.user)==null?void 0:t.role,R=Array.isArray(h==null?void 0:h.data)?h.data:h||[],[_,te]=oe.useState(null),[z,re]=oe.useState("asc"),G=C??M.map(o=>o.key),ne=[...R].sort((o,c)=>{if(!_)return 0;const i=o[_]??"",a=c[_]??"";return typeof i=="number"&&typeof a=="number"?z==="asc"?i-a:a-i:z==="asc"?String(i).localeCompare(String(a)):String(a).localeCompare(String(i))});return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-2",children:v}),l.jsxs("div",{className:"w-full overflow-x-auto border rounded-lg",children:[l.jsx("div",{className:"max-h-[800px] overflow-y-auto",children:l.jsxs("table",{ref:K,className:"table-auto w-full min-w-max",children:[l.jsx("thead",{className:"sticky top-0 z-5 bg-white shadow-md",children:l.jsx("tr",{children:M.map(o=>G.includes(o.key)&&l.jsx("th",{className:"bg-gray-100 text-gray-800 p-3 whitespace-nowrap text-wrap text-start text-sm font-semibold min-w-[60px] max-w-[100px]",children:o.label},o.key))})}),l.jsx("tbody",{children:R.length>0?ne.map((o,c)=>l.jsx("tr",{className:"border-b hover:bg-gray-50",children:M.map(i=>{var a;return G.includes(i.key)?l.jsx("td",{className:"py-2 px-3 whitespace-wrap text-wrap break-words text-sm text-gray-700 min-w-[60px] max-w-[100px]",children:i.key==="actions"?(()=>{var x,p;const g=(x=A[i.key])==null?void 0:x.call(A,o);if(!g)return null;if(Q!=="admin"&&((p=g.props)!=null&&p.actions)){const w=g.props.actions.filter(P=>P.label!=="Delete");return de.cloneElement(g,{actions:w})}return g})():((a=A[i.key])==null?void 0:a.call(A,o))??""},`${c}-${i.key}`):null})},c)):l.jsx("tr",{children:l.jsx("td",{colSpan:G.length,className:"text-center py-6 text-gray-500",children:l.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[l.jsx(he,{className:"w-20 h-20 text-gray-400"}),l.jsx("span",{className:"text-md font-medium",children:"No records found"})]})})})})]})}),G.length===0?l.jsx("div",{className:"p-2 text-sm text-red-600 font-medium w-full text-center rounded-lg border border-gray-200 mt-4",children:"All columns are hidden."}):l.jsxs("div",{className:"my-2 px-4 flex items-center justify-between",children:[b&&l.jsxs("span",{className:"text-sm text-gray-700 bg-gray-100 px-2 mt-4 py-1 rounded-md",children:["Showing ",R.length," /"," ",(h==null?void 0:h.total)??R.length," records"]}),Array.isArray(h==null?void 0:h.links)&&h.links.length>0&&l.jsx(ye,{links:h.links,queryParams:j})]})]})]})};export{xe as default};
