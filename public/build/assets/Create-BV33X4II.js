import{K as R,m as k,r as h,j as e,L as S}from"./app-DWLvIQdF.js";import I from"./BreadcrumbsHeader-Cn59CTpR.js";import{I as i}from"./InputError-B2rpTTc2.js";import{I as p}from"./InputField-DCBd0Ia9.js";import{I as l}from"./InputLabel-CbfaVs9z.js";import{B as v}from"./button-D5oOHpih.js";import{S as B}from"./AdminLayout-DF3T9r93.js";import{S as E}from"./SelectField-DXLqNboK.js";import{T as d}from"./textarea-DbOMRDJQ.js";import{P as u}from"./ParticipantSection-CFvFSyKc.js";import{t as x,T as L}from"./index-DiQ2ABd4.js";import{c as A}from"./createLucideIcon-COg8xDid.js";import{R as T}from"./rotate-ccw-D5bcHjGp.js";import{S as D}from"./save-Donyjy-7.js";import"./breadcrumb-Tr7bH4sQ.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-B7veGfa5.js";import"./sidebar-B55M1Lhe.js";import"./input-Bjq-UOVg.js";import"./index-C7xi9LN0.js";import"./index-DaxHkuH7.js";import"./floating-ui.react-dom-TXoiB1Cy.js";import"./x-Dj4h3Hl7.js";import"./skeleton-DxhMNfTQ.js";import"./tooltip-DGgHmMGp.js";import"./nav-user-ifqrtdkH.js";import"./avatar-xvo1q8ho.js";import"./dropdown-menu-301tgmQC.js";import"./check-DAMLPx8H.js";import"./useAppUrl-DygNqr49.js";import"./users-round-DfUg6NaG.js";import"./heart-pulse-DBmhNY90.js";import"./chevron-up-DDEZVR48.js";import"./index-BK-nQiHO.js";import"./iconBase-BwLSqiDZ.js";import"./DropdownInputField-CGF8rdIi.js";import"./constants-BC8DDBPg.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],O=A("file-pen-line",M);function ye({residents:g}){const j=[{label:"Katarungang Pambarangay",showOnMobile:!1},{label:"Blotter Reports",href:route("blotter_report.index"),showOnMobile:!1},{label:"Create a Blotter Report",showOnMobile:!0}],o=R().props,m=(o==null?void 0:o.success)??null,n=(o==null?void 0:o.error)??null,{data:a,setData:s,post:b,errors:r,reset:f}=k({type_of_incident:"",narrative_details:"",actions_taken:"",report_status:"",location:"",resolution:"",recommendations:"",incident_date:"",recorded_by:null,complainants:[{resident_id:""}],respondents:[{resident_id:""}],witnesses:[{resident_id:""}],attachments:[]}),_=t=>{t.preventDefault(),b(route("blotter_report.store"),{onError:y=>{const N=Object.values(y).map((w,C)=>`<div key=${C}> ${w}</div>`);x.error("Validation Error",{description:e.jsx("div",{dangerouslySetInnerHTML:{__html:N.join("")}}),duration:4e3,closeButton:!0})}})},c=g.map(t=>({value:t.id,label:`${t.firstname} ${t.middlename?t.middlename+" ":""}${t.lastname}${t.suffix?", "+t.suffix:""}`,...t}));return h.useEffect(()=>{m&&(handleModalClose(),x.success(m,{description:"Operation successful!",duration:3e3,closeButton:!0})),o.success=null},[m]),h.useEffect(()=>{n&&x.error(n,{description:"Operation failed!",duration:3e3,closeButton:!0}),o.error=null},[n]),e.jsxs(B,{children:[e.jsx(S,{title:"Blotter Report"}),e.jsx(L,{richColors:!0}),e.jsx(I,{breadcrumbs:j}),e.jsx("div",{children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 my-2",children:e.jsxs("div",{className:" my-2 p-2",children:[n&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:n}),e.jsx("div",{children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 mb-6 bg-gray-50 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(O,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-2xl font-semibold text-gray-800 mb-1",children:"Blotter Report Form"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fill out the details of the incident, including participants, actions, and recommendations. Ensure all required fields are completed before submitting."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(p,{label:"Type of Incident",name:"type_of_incident",value:a.type_of_incident,onChange:t=>s("type_of_incident",t.target.value),placeholder:"Ex: Theft, Violence"}),e.jsx(i,{message:r.type_of_incident,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{type:"datetime-local",label:"Incident Date & Time",name:"incident_date",value:a.incident_date,onChange:t=>s("incident_date",t.target.value)}),e.jsx(i,{message:r.incident_date,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{label:"Location",name:"location",value:a.location,onChange:t=>s("location",t.target.value),placeholder:"Incident Location"}),e.jsx(i,{message:r.location,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(E,{label:"Report Status",name:"report_status",value:a.report_status||"",onChange:t=>s("report_status",t.target.value),items:[{label:"Pending",value:"pending"},{label:"On Going",value:"on_going"},{label:"Resolved",value:"resolved"},{label:"Elevated",value:"elevated"}],placeholder:"Select Status"}),e.jsx(i,{message:r.report_status,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Narrative Details"}),e.jsx(d,{name:"narrative_details",value:a.narrative_details,onChange:t=>s("narrative_details",t.target.value),placeholder:"Describe what happened in details...",rows:5}),e.jsx(i,{message:r.narrative_details,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Actions Taken"}),e.jsx(d,{name:"actions_taken",value:a.actions_taken,onChange:t=>s("actions_taken",t.target.value),placeholder:"What immediate actions were taken?",rows:5}),e.jsx(i,{message:r.actions_taken,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Resolution"}),e.jsx(d,{name:"resolution",value:a.resolution,onChange:t=>s("resolution",t.target.value),placeholder:"Resolution or settlement details...",rows:4}),e.jsx(i,{message:r.resolution,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Recommendations"}),e.jsx(d,{name:"recommendations",value:a.recommendations,onChange:t=>s("recommendations",t.target.value),placeholder:"Any recommendations for next steps...",rows:4}),e.jsx(i,{message:r.recommendations,className:"mt-1"})]})]}),e.jsx(u,{title:"Complainants",dataArray:a.complainants,setDataArray:t=>s("complainants",t),errors:r,residentsList:c}),e.jsx(u,{title:"Respondents",dataArray:a.respondents,setDataArray:t=>s("respondents",t),errors:r,residentsList:c}),e.jsx(u,{title:"Witnesses",dataArray:a.witnesses,setDataArray:t=>s("witnesses",t),errors:r,residentsList:c}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-4 gap-4 pt-0",children:[e.jsxs(v,{type:"button",onClick:()=>f(),variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50 transition duration-150",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Reset Form"]}),e.jsxs(v,{type:"submit",className:"w-40 bg-blue-600 hover:bg-blue-700 transition duration-150 shadow-md",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Submit Report"]})]})]})})]})})})})]})}export{ye as default};
