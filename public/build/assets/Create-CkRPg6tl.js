import{K as k,m as I,r as v,j as e,L as B}from"./app-C4eYhi_l.js";import E from"./BreadcrumbsHeader-2D5rr_Ap.js";import{I as i}from"./InputError-BtpOxp7w.js";import{I as u}from"./InputField-92S_15ir.js";import{I as l}from"./InputLabel-NpthKzNg.js";import{B as g}from"./button-DI-Cd1Gx.js";import{S as L}from"./AdminLayout-BT7wF6Mc.js";import{S as T}from"./SelectField-B2mdO7LT.js";import{T as d}from"./textarea-RfztXPqY.js";import{P as x}from"./ParticipantSection-Dtf19cQ5.js";import{t as h,T as A}from"./index-BFcuYs35.js";import{t as j,b as m}from"./stringFormat-Dx_XIxG1.js";import{c as D}from"./createLucideIcon-ix0d0rI9.js";import{R as M}from"./rotate-ccw-CgRs-V5V.js";import{S as O}from"./save-Chm5VhRy.js";import"./breadcrumb-B0lL97FL.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./chevron-right-Cm2R-uMO.js";import"./sidebar-B80sq0Kf.js";import"./input-B1v_GmYX.js";import"./index-DeJaiS9l.js";import"./index-DZeuKxhq.js";import"./floating-ui.react-dom-nJuhhlFk.js";import"./x-DGTK5KZy.js";import"./tooltip-D15WLvEi.js";import"./nav-user-D7t2WIAG.js";import"./avatar-WRU7l1Ef.js";import"./dropdown-menu-B0oOdoOV.js";import"./check-BP_4wZ21.js";import"./useAppUrl-B_lHPlr5.js";import"./DeleteConfirmationModal-DcpGqNMw.js";import"./file-text-BhJx6_pw.js";import"./users-round-D6dnzBtP.js";import"./heart-pulse-C0ARj-oW.js";import"./chevron-up-BkPfmUJf.js";import"./index-CEmPLSbn.js";import"./iconBase-zIHfGzTo.js";import"./DropdownInputField-PRbbtu7E.js";import"./constants-DxZHzEsj.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],$=D("file-pen-line",F);function Re({residents:b}){const f=[{label:"Katarungang Pambarangay",showOnMobile:!1},{label:"Blotter Reports",href:route("blotter_report.index"),showOnMobile:!1},{label:"Create a Blotter Report",showOnMobile:!0}],o=k().props,c=(o==null?void 0:o.success)??null,n=(o==null?void 0:o.error)??null,{data:a,setData:s,post:_,errors:r,reset:y}=I({type_of_incident:"",narrative_details:"",actions_taken:"",report_status:"",location:"",resolution:"",recommendations:"",incident_date:"",recorded_by:null,complainants:[{resident_id:""}],respondents:[{resident_id:""}],witnesses:[{resident_id:""}],attachments:[]}),N=t=>{t.preventDefault(),_(route("blotter_report.store"),{onError:w=>{const C=Object.values(w).map((R,S)=>`<div key=${S}> ${R}</div>`);h.error("Validation Error",{description:e.jsx("div",{dangerouslySetInnerHTML:{__html:C.join("")}}),duration:4e3,closeButton:!0})}})},p=b.map(t=>({value:t.id,label:`${t.firstname} ${t.middlename?t.middlename+" ":""}${t.lastname}${t.suffix?", "+t.suffix:""}`,...t}));return v.useEffect(()=>{c&&(handleModalClose(),h.success(c,{description:"Operation successful!",duration:3e3,closeButton:!0})),o.success=null},[c]),v.useEffect(()=>{n&&h.error(n,{description:"Operation failed!",duration:3e3,closeButton:!0}),o.error=null},[n]),e.jsxs(L,{children:[e.jsx(B,{title:"Blotter Report"}),e.jsx(A,{richColors:!0}),e.jsx(E,{breadcrumbs:f}),e.jsx("div",{children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6",children:e.jsx("div",{className:"overflow-hidden bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 my-2",children:e.jsxs("div",{className:" my-2 p-2",children:[n&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:n}),e.jsx("div",{children:e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 mb-6 bg-gray-50 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx($,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-2xl font-semibold text-gray-800 mb-1",children:"Blotter Report Form"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fill out the details of the incident, including participants, actions, and recommendations. Ensure all required fields are completed before submitting."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Type of Incident",name:"type_of_incident",value:a.type_of_incident,onChange:t=>s("type_of_incident",j(t.target.value)),placeholder:"Ex: Theft, Violence"}),e.jsx(i,{message:r.type_of_incident,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(u,{type:"datetime-local",label:"Incident Date & Time",name:"incident_date",value:a.incident_date,onChange:t=>s("incident_date",t.target.value)}),e.jsx(i,{message:r.incident_date,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(u,{label:"Location",name:"location",value:a.location,onChange:t=>s("location",j(t.target.value)),placeholder:"Incident Location"}),e.jsx(i,{message:r.location,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{label:"Report Status",name:"report_status",value:a.report_status||"",onChange:t=>s("report_status",t.target.value),items:[{label:"Pending",value:"pending"},{label:"On Going",value:"on_going"},{label:"Resolved",value:"resolved"},{label:"Elevated",value:"elevated"}],placeholder:"Select Status"}),e.jsx(i,{message:r.report_status,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Narrative Details"}),e.jsx(d,{name:"narrative_details",value:a.narrative_details,onChange:t=>s("narrative_details",m(t.target.value)),placeholder:"Describe what happened in details...",rows:5}),e.jsx(i,{message:r.narrative_details,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Actions Taken"}),e.jsx(d,{name:"actions_taken",value:a.actions_taken,onChange:t=>s("actions_taken",m(t.target.value)),placeholder:"What immediate actions were taken?",rows:5}),e.jsx(i,{message:r.actions_taken,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Resolution"}),e.jsx(d,{name:"resolution",value:a.resolution,onChange:t=>s("resolution",m(t.target.value)),placeholder:"Resolution or settlement details...",rows:4}),e.jsx(i,{message:r.resolution,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Recommendations"}),e.jsx(d,{name:"recommendations",value:a.recommendations,onChange:t=>s("recommendations",m(t.target.value)),placeholder:"Any recommendations for next steps...",rows:4}),e.jsx(i,{message:r.recommendations,className:"mt-1"})]})]}),e.jsx(x,{title:"Complainants",dataArray:a.complainants,setDataArray:t=>s("complainants",t),errors:r,residentsList:p}),e.jsx(x,{title:"Respondents",dataArray:a.respondents,setDataArray:t=>s("respondents",t),errors:r,residentsList:p}),e.jsx(x,{title:"Witnesses",dataArray:a.witnesses,setDataArray:t=>s("witnesses",t),errors:r,residentsList:p}),e.jsxs("div",{className:"flex w-full justify-end items-center mt-4 gap-4 pt-0",children:[e.jsxs(g,{type:"button",onClick:()=>y(),variant:"outline",className:"text-gray-600 border-gray-300 hover:bg-gray-50 transition duration-150",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Reset Form"]}),e.jsxs(g,{type:"submit",className:"w-40 bg-blue-600 hover:bg-blue-700 transition duration-150 shadow-md",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Submit Report"]})]})]})})]})})})})]})}export{Re as default};
