import{K,r as o,j as e,L as P,$ as V,S as h,a as X}from"./app-C3NVK6am.js";import{S as Y,a as G}from"./AdminLayout-C_zFBF4X.js";import{B as S}from"./button-DsDnJj0i.js";import{I as W}from"./input-CKFIdOeX.js";import Q from"./BreadcrumbsHeader-DXAgqkGq.js";import{t as v,T as J}from"./index-DMUPqDLB.js";import Z from"./DynamicTable-BS0N9oiI.js";import q from"./ActionMenu-Dw_7okjd.js";import{e as ee,R as te,b as se}from"./constants-Cu2udUY3.js";import re from"./SidebarModal-Bh5Zqpgv.js";import oe from"./DynamicTableControls-BQIrmCIX.js";import ae from"./FillterToggle-BpouJfMp.js";import{u as le}from"./useAppUrl-DGjP6J_-.js";import ie from"./PersonDetailContent-BVOIQuYe.js";import ne from"./DeleteConfirmationModal-Cgt7l8qY.js";import{E}from"./ExportButton-BdGqV3xo.js";import{S as ce}from"./search-DtodBBBc.js";import{L as de}from"./list-plus-DDZNz4FJ.js";import{E as me}from"./eye-CcFQhM6C.js";import{S as pe}from"./square-pen-4noa8V4d.js";import{T as ue}from"./trash-2-Dwe2m_QE.js";import"./sidebar-wPaUtDv3.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./index-D5UNyBOW.js";import"./index-DaXYrN_r.js";import"./floating-ui.react-dom-BPdg0msh.js";import"./x-DuWGoabV.js";import"./createLucideIcon-D2xZUByM.js";import"./tooltip-DmJvfED-.js";import"./nav-user-B_hmJ4S1.js";import"./avatar-BDstatoC.js";import"./dropdown-menu-DRKbjXak.js";import"./check-C13shK5h.js";import"./chevron-right-CYzJvvMM.js";import"./file-text-DgF7YVib.js";import"./users-round-D24lT0GM.js";import"./heart-pulse-B202c26o.js";import"./chevron-up-BK7V0l4s.js";import"./breadcrumb-c36xZWrz.js";import"./ellipsis-k3BFxFc-.js";import"./react-datepicker-eSr82AwM.js";import"./index-Cj-7ECFc.js";import"./iconBase-DFRbZ-aH.js";import"./index-Dstxjwfi.js";import"./index-Bb8YYrCs.js";import"./file-output-ujwNE7Jm.js";function mt({medical_information:b,puroks:D,queryParams:r}){const C=[{label:"Residents Information",showOnMobile:!1},{label:"Medical Information",showOnMobile:!0}];r=r||{};const R=le(),l=K().props,n=(l==null?void 0:l.success)??null,c=(l==null?void 0:l.error)??null,[T,d]=o.useState(!1),[g,I]=o.useState(null),[f,M]=o.useState(r.name??""),[O,m]=o.useState(!1),[y,_]=o.useState(null),A=t=>{t.preventDefault(),p("name",f)},p=(t,s)=>{s&&s.trim()!==""?r[t]=s:delete r[t],r.page&&delete r.page,h.get(route("medical.index",r))},F=(t,s)=>{if(s.key==="Enter")p(t,s.target.value);else return},u=[{key:"id",label:"ID"},{key:"name",label:"Resident Name"},{key:"weight_kg",label:"Weight (kg)"},{key:"height_cm",label:"Height (cm)"},{key:"sex",label:"Sex"},{key:"nutrition_status",label:"Nutritional Status"},{key:"blood_type",label:"Blood Type"},{key:"emergency_contact_number",label:"Emergency Contact Number"},{key:"is_smoker",label:"Smoker?"},{key:"is_alcohol_user",label:"Alcohol User?"},{key:"philhealth_id_number",label:"PhilHealth ID"},{key:"is_pwd",label:"Is PWD?"},{key:"purok_number",label:"Purok Number"},{key:"actions",label:"Actions"}],[j,B]=o.useState(u.map(t=>t.key)),[xe,he]=o.useState(!0),[be,ge]=o.useState(!1),x=Object.entries(r||{}).some(([t,s])=>["purok","sex","nutritional_status","blood_type","is_smoker","alcohol_user","has_philhealth","is_pwd"].includes(t)&&s&&s!=="");o.useEffect(()=>{x&&N(!0)},[x]);const[w,N]=o.useState(x),L={id:t=>t.id,name:t=>{const s=t.resident??{};return e.jsxs("span",{children:[s.firstname," ",s.middlename??""," ",s.lastname," ",s.suffix??""]})},weight_kg:t=>t.weight_kg??"—",height_cm:t=>t.height_cm??"—",sex:t=>{const s=t.resident.sex,i=te[s]??"Unknown",a=se[s]??"bg-gray-300";return e.jsx("span",{className:`py-1 px-2 rounded-xl text-sm font-medium whitespace-nowrap ${a}`,children:i})},nutrition_status:t=>{const s=t.nutrition_status,i=ee[s]??"—";let a="";switch(s){case"normal":a="bg-green-100 text-green-800 p-1 rounded";break;case"underweight":case"severly_underweight":a="bg-yellow-100 text-yellow-800 p-1 rounded";break;case"overweight":a="bg-orange-100 text-orange-800 p-1 rounded";break;case"obese":a="bg-red-100 text-red-800 p-1 rounded";break;default:a="bg-gray-100 text-gray-800 p-1 rounded"}return e.jsx("span",{className:a,children:i})},blood_type:t=>t.blood_type??"—",emergency_contact_number:t=>t.emergency_contact_number??"—",is_pwd:t=>{var a,k;const s=(((k=(a=t.resident)==null?void 0:a.disabilities)==null?void 0:k.length)??0)>0,i=s?"bg-green-100 text-green-800 px-2 py-1 rounded":"bg-gray-100 text-gray-800 px-2 py-1 rounded";return e.jsx("span",{className:i,children:s?"Yes":"No"})},is_smoker:t=>t.is_smoker?e.jsx("span",{className:"text-red-500",children:"Yes"}):e.jsx("span",{className:"text-gray-500",children:"No"}),is_alcohol_user:t=>t.is_alcohol_user?e.jsx("span",{className:"text-red-500",children:"Yes"}):e.jsx("span",{className:"text-gray-500",children:"No"}),philhealth_id_number:t=>t.philhealth_id_number??"—",purok_number:t=>{var s;return((s=t.resident)==null?void 0:s.purok_number)??"—"},actions:t=>e.jsx(q,{actions:[{label:"View",icon:e.jsx(me,{className:"w-4 h-4 text-indigo-600"}),onClick:()=>H(t.resident.id)},{label:"Edit",icon:e.jsx(pe,{className:"w-4 h-4 text-green-500"}),onClick:()=>{h.get(route("medical.edit",t.id))}},{label:"Delete",icon:e.jsx(ue,{className:"w-4 h-4 text-red-600"}),onClick:()=>$(t.id)}]})},U=()=>{m(!1),_(null)},$=t=>{I(t),d(!0)},z=()=>{h.delete(route("medical.destroy",g)),d(!1)},H=async t=>{try{const s=await X.get(`${R}/resident/showresident/${t}`);_(s.data.resident)}catch(s){console.error("Error fetching placeholders:",s)}m(!0)};return o.useEffect(()=>{n&&(U(),v.success(n,{description:"Operation successful!",duration:3e3,closeButton:!0})),l.success=null},[n]),o.useEffect(()=>{c&&v.error(c,{description:"Operation failed!",duration:3e3,closeButton:!0}),l.error=null},[c]),e.jsxs(Y,{children:[e.jsx(P,{title:"Medical Information"}),e.jsxs("div",{children:[e.jsx(J,{richColors:!0}),e.jsx(Q,{breadcrumbs:C}),e.jsx("div",{className:"p-2 md:p-4",children:e.jsx("div",{className:"mx-auto max-w-8xl px-2 sm:px-4 lg:px-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl sm:rounded-lg p-4 m-0",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(G,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900",children:"Medical Information"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["This section contains essential health details needed for"," ",e.jsx("span",{className:"font-medium",children:"emergency response, welfare assessment,"})," ","and accurate barangay medical profiling. Please ensure that all information such as"," ",e.jsx("span",{className:"font-medium",children:"weight, height, blood type, nutrition status,"})," ","and emergency contacts are accurate and up to date."]})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 w-full mb-0",children:[e.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[e.jsx(oe,{allColumns:u,visibleColumns:j,setVisibleColumns:B,showFilters:w,toggleShowFilters:()=>N(t=>!t)}),e.jsx(E,{url:"report/export-medical-excel",queryParams:r,label:"Export Summon Records as XLSX"}),e.jsx(E,{url:"report/export-medical-pdf",queryParams:r,label:"Export Education Histories as PDF",type:"pdf",totalRecords:b.total})]}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:e.jsxs("form",{onSubmit:A,className:"flex w-[300px] max-w-lg items-center space-x-1",children:[e.jsx(W,{type:"text",placeholder:"Search Resident Name",value:f,onChange:t=>M(t.target.value),onKeyDown:t=>F("name",t.target.value),className:"w-full"}),e.jsxs("div",{className:"relative group z-50",children:[e.jsx(S,{type:"submit",className:"border active:bg-blue-900 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white flex items-center gap-2 bg-transparent",variant:"outline",children:e.jsx(ce,{})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Search"})]}),e.jsx("div",{className:"relative group z-50",children:e.jsxs(V,{href:route("medical.create"),children:[e.jsx(S,{variant:"outline",className:"flex items-center gap-2 border-blue-300 text-blue-700 hover:bg-blue-600 hover:text-white",type:"button",children:e.jsx(de,{})}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-max px-3 py-1.5 rounded-md bg-blue-700 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:"Add Medical Information"})]})})]})})]}),w&&e.jsx(ae,{queryParams:r,searchFieldName:p,visibleFilters:["purok","sex","nutritional_status","blood_type","is_smoker","alcohol_user","has_philhealth","is_pwd"],puroks:D,showFilters:!0,clearRouteName:"medical.index",clearRouteParams:{}}),e.jsx(Z,{passedData:b,allColumns:u,columnRenderers:L,queryParams:r,visibleColumns:j,showTotal:!0})]})})}),e.jsx(re,{isOpen:O,onClose:()=>m(!1),title:"Resident Details",children:y&&e.jsx(ie,{person:y})}),e.jsx(ne,{isOpen:T,onClose:()=>{d(!1)},onConfirm:z,residentId:g})]})]})}export{mt as default};
