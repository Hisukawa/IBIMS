import{j as a,L as y,S as N}from"./app-BxHM3TmU.js";import{S as T,U as f}from"./AdminLayout-CLyA5PMV.js";import F from"./BreadcrumbsHeader-FSb2cX68.js";import{B as k}from"./BarangayFilterCard-DVeVQHf3.js";import b from"./DynamicTable-obktPc3y.js";import{T as p}from"./TableSection-DghlAcwB.js";import{N as M}from"./NoDataPlaceholder-CD3SoIwZ.js";import{B as A}from"./button-BzegXlVa.js";import{F as P}from"./file-spreadsheet-CaOOvXaH.js";import"./sidebar--kBafPY3.js";import"./utils-CkmPJWYF.js";import"./clsx-B-dksMZM.js";import"./input-BtZ39zbj.js";import"./index-BVkhVRt3.js";import"./index-KDaV5qCU.js";import"./floating-ui.react-dom-BZ2127LC.js";import"./x-ChQLzUTw.js";import"./createLucideIcon-dPNP_im9.js";import"./tooltip-CIkA7PKM.js";import"./nav-user-kqQ3Xrsr.js";import"./avatar-BNok6O5b.js";import"./dropdown-menu-vN1k0X44.js";import"./check-C8im60Ee.js";import"./chevron-right-DVzyaonL.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-CL9mDdLb.js";import"./index-Cwm8Owpg.js";import"./DeleteConfirmationModal-Dhxjp7c9.js";import"./file-text-BXvNQVmZ.js";import"./users-round-CwhtqOkn.js";import"./heart-pulse-CtnArz5r.js";import"./chevron-up-B2MtiAW1.js";import"./breadcrumb-DBNCcfZ6.js";import"./SelectField-CW6ZQ791.js";import"./card-C8XRn148.js";function ge({populationExposureData:r=[],overallPopulationExposureData:n=[],overallHazardSummary:q=[],barangays:x=[],selectedBarangay:_,tip:u}){const h=[{label:"CRA",showOnMobile:!0},{label:"Population Exposure",showOnMobile:!0}],j=i=>{const d=i.target.value;N.get(route("cdrrmo_admin.populationexposure"),d?{barangay_id:d}:{})},v=!_&&(!n||n.length===0)||_&&(!r||r.filter(i=>i.barangay_id===_).length===0);return a.jsxs(T,{children:[a.jsx(y,{title:"Population Exposure"}),a.jsx(F,{breadcrumbs:h}),a.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:a.jsx("div",{className:"mx-auto w-full",children:v?a.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:[" ",a.jsx(M,{tip:u||"Select a barangay or view overall data from the dropdown above."})]}):a.jsxs(a.Fragment,{children:[a.jsx(k,{selectedBarangay:_,handleBarangayChange:j,barangays:x}),n.length>0&&n.map((i,d)=>{const g=(i.barangays||[]).map((l,t)=>({number:l.no??t+1,barangay_name:l.barangay_name??"-",total_families:l.total_families??0,total_individuals:l.total_individuals??0,male:l.male??0,female:l.female??0,lgbtq:l.lgbtq??0,pregnant:l.pregnant??0,pwd:{male:l.pwd_male,female:l.pwd_female},diseases:{male:l.diseases_male,female:l.diseases_female},...l.age_groups})),m=[{key:"number",label:"No."},{key:"barangay_name",label:"Barangay"},{key:"total_families",label:"Total Families"},{key:"total_individuals",label:"Total Individuals"},{key:"male",label:"Male"},{key:"female",label:"Female"},{key:"lgbtq",label:"LGBTQ"},{key:"pwd",label:"PWD"},{key:"diseases",label:"Diseases"},{key:"pregnant",label:"Pregnant"},{key:"age_0_6",label:"Age 0-6"},{key:"age_7m_2y",label:"Age 7m-2y"},{key:"age_3_5",label:"Age 3-5"},{key:"age_6_12",label:"Age 6-12"},{key:"age_13_17",label:"Age 13-17"},{key:"age_18_59",label:"Age 18-59"},{key:"age_60_up",label:"Age 60+"}],o={number:l=>a.jsx("span",{className:"font-semibold",children:l.number}),barangay_name:l=>a.jsx("span",{className:"font-semibold",children:l.barangay_name}),total_families:l=>a.jsx("span",{children:l.total_families}),total_individuals:l=>a.jsx("span",{children:l.total_individuals}),male:l=>a.jsx("span",{children:l.male}),female:l=>a.jsx("span",{children:l.female}),lgbtq:l=>a.jsx("span",{children:l.lgbtq}),pregnant:l=>a.jsx("span",{children:l.pregnant}),pwd:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male: ",l.pwd.male]}),a.jsxs("div",{children:["Female: ",l.pwd.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",Number(l.pwd.male)+Number(l.pwd.female)]})]}),diseases:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.diseases.male]}),a.jsxs("div",{children:["Female:"," ",l.diseases.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",Number(l.diseases.male)+Number(l.diseases.female)]})]}),age_0_6:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male: ",l.age_0_6.male]}),a.jsxs("div",{children:["Female:"," ",l.age_0_6.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_0_6.male+l.age_0_6.female]})]}),age_7m_2y:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.age_7m_2y.male]}),a.jsxs("div",{children:["Female:"," ",l.age_7m_2y.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_7m_2y.male+l.age_7m_2y.female]})]}),age_3_5:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male: ",l.age_3_5.male]}),a.jsxs("div",{children:["Female:"," ",l.age_3_5.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_3_5.male+l.age_3_5.female]})]}),age_6_12:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.age_6_12.male]}),a.jsxs("div",{children:["Female:"," ",l.age_6_12.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_6_12.male+l.age_6_12.female]})]}),age_13_17:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.age_13_17.male]}),a.jsxs("div",{children:["Female:"," ",l.age_13_17.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_13_17.male+l.age_13_17.female]})]}),age_18_59:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.age_18_59.male]}),a.jsxs("div",{children:["Female:"," ",l.age_18_59.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_18_59.male+l.age_18_59.female]})]}),age_60_up:l=>a.jsxs("div",{children:[a.jsxs("div",{children:["Male:"," ",l.age_60_up.male]}),a.jsxs("div",{children:["Female:"," ",l.age_60_up.female]}),a.jsxs("div",{className:"font-semibold",children:["Total:"," ",l.age_60_up.male+l.age_60_up.female]})]})},c=()=>{const l=sessionStorage.getItem("cra_year")||selectedYear||new Date().getFullYear(),t=i.hazard_name||"Flood",s=`${window.location.origin}/cdrrmo_admin/cra/population-exposure-summary/pdf?year=${l}&hazard=${encodeURIComponent(t)}`;window.open(s,"_blank")};return a.jsx(p,{icon:a.jsx(f,{}),color:"blue",title:`Population Exposure - ${i.hazard_name}`,description:`Population exposure per barangay for ${i.hazard_name}`,tableProps:{component:b,passedData:g,allColumns:m,columnRenderers:o,visibleColumns:m.map(l=>l.key),showTotal:!0,tableHeight:"500px"},children:a.jsxs(A,{onClick:c,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-sm transition duration-200",children:[a.jsx(P,{className:"w-5 h-5"}),"Export Data"]})},`hazard-${i.hazard_name||d}`)}),r.filter(i=>i.barangay_id===_).map(i=>i.hazards.map((d,g)=>{const m=(d.puroks||[]).map((e,s)=>({purok_number:e.purok_number??"-",total_families:e.total_families??0,total_individuals:e.total_individuals??0,male:e.male??0,female:e.female??0,lgbtq:e.lgbtq??0,pwd_male:e.pwd_male??0,pwd_female:e.pwd_female??0,diseases_male:e.diseases_male??0,diseases_female:e.diseases_female??0,pregnant:e.pregnant??0,age_0_6:{male:e.age_0_6_male??0,female:e.age_0_6_female??0},age_7m_2y:{male:e.age_7m_2y_male??0,female:e.age_7m_2y_female??0},age_3_5:{male:e.age_3_5_male??0,female:e.age_3_5_female??0},age_6_12:{male:e.age_6_12_male??0,female:e.age_6_12_female??0},age_13_17:{male:e.age_13_17_male??0,female:e.age_13_17_female??0},age_18_59:{male:e.age_18_59_male??0,female:e.age_18_59_female??0},age_60_up:{male:e.age_60_up_male??0,female:e.age_60_up_female??0}})),o=[{key:"purok_number",label:"Purok"},{key:"total_families",label:"Total Families"},{key:"total_individuals",label:"Total Individuals"},{key:"male",label:"Male"},{key:"female",label:"Female"},{key:"lgbtq",label:"LGBTQ"},{key:"pwd_male",label:"PWD Male"},{key:"pwd_female",label:"PWD Female"},{key:"diseases_male",label:"Diseases Male"},{key:"diseases_female",label:"Diseases Female"},{key:"pregnant",label:"Pregnant"},{key:"age_0_6",label:"Age 0-6"},{key:"age_7m_2y",label:"Age 7m-2y"},{key:"age_3_5",label:"Age 3-5"},{key:"age_6_12",label:"Age 6-12"},{key:"age_13_17",label:"Age 13-17"},{key:"age_18_59",label:"Age 18-59"},{key:"age_60_up",label:"Age 60+"}],c={purok_number:e=>a.jsx("span",{className:e.isTotal?"font-bold bg-blue-600 text-white px-2 py-1 rounded":"font-semibold",children:e.purok_number}),total_families:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.total_families}),total_individuals:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.total_individuals}),male:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.male}),female:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.female}),lgbtq:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.lgbtq}),pwd_male:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.pwd_male}),pwd_female:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.pwd_female}),diseases_male:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.diseases_male}),diseases_female:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.diseases_female}),pregnant:e=>a.jsx("span",{className:e.isTotal?"font-bold text-blue-700":"",children:e.pregnant}),age_0_6:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_0_6.male]}),a.jsxs("div",{children:["Female:"," ",e.age_0_6.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_0_6.male+e.age_0_6.female]})]}),age_7m_2y:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_7m_2y.male]}),a.jsxs("div",{children:["Female:"," ",e.age_7m_2y.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_7m_2y.male+e.age_7m_2y.female]})]}),age_3_5:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_3_5.male]}),a.jsxs("div",{children:["Female:"," ",e.age_3_5.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_3_5.male+e.age_3_5.female]})]}),age_6_12:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_6_12.male]}),a.jsxs("div",{children:["Female:"," ",e.age_6_12.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_6_12.male+e.age_6_12.female]})]}),age_13_17:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_13_17.male]}),a.jsxs("div",{children:["Female:"," ",e.age_13_17.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_13_17.male+e.age_13_17.female]})]}),age_18_59:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_18_59.male]}),a.jsxs("div",{children:["Female:"," ",e.age_18_59.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_18_59.male+e.age_18_59.female]})]}),age_60_up:e=>a.jsxs("div",{className:e.isTotal?"bg-blue-50 p-2 rounded font-semibold":"",children:[a.jsxs("div",{children:["Male:"," ",e.age_60_up.male]}),a.jsxs("div",{children:["Female:"," ",e.age_60_up.female]}),a.jsxs("div",{className:"font-bold mt-1 text-blue-700",children:["Total:"," ",e.age_60_up.male+e.age_60_up.female]})]})},l={isTotal:!0,purok_number:"TOTAL",total_families:m.reduce((e,s)=>e+s.total_families,0),total_individuals:m.reduce((e,s)=>e+s.total_individuals,0),male:m.reduce((e,s)=>e+s.male,0),female:m.reduce((e,s)=>e+s.female,0),lgbtq:m.reduce((e,s)=>e+s.lgbtq,0),pwd_male:m.reduce((e,s)=>e+s.pwd_male,0),pwd_female:m.reduce((e,s)=>e+s.pwd_female,0),diseases_male:m.reduce((e,s)=>e+s.diseases_male,0),diseases_female:m.reduce((e,s)=>e+s.diseases_female,0),pregnant:m.reduce((e,s)=>e+s.pregnant,0),age_0_6:{male:m.reduce((e,s)=>e+s.age_0_6.male,0),female:m.reduce((e,s)=>e+s.age_0_6.female,0)},age_7m_2y:{male:m.reduce((e,s)=>e+s.age_7m_2y.male,0),female:m.reduce((e,s)=>e+s.age_7m_2y.female,0)},age_3_5:{male:m.reduce((e,s)=>e+s.age_3_5.male,0),female:m.reduce((e,s)=>e+s.age_3_5.female,0)},age_6_12:{male:m.reduce((e,s)=>e+s.age_6_12.male,0),female:m.reduce((e,s)=>e+s.age_6_12.female,0)},age_13_17:{male:m.reduce((e,s)=>e+s.age_13_17.male,0),female:m.reduce((e,s)=>e+s.age_13_17.female,0)},age_18_59:{male:m.reduce((e,s)=>e+s.age_18_59.male,0),female:m.reduce((e,s)=>e+s.age_18_59.female,0)},age_60_up:{male:m.reduce((e,s)=>e+s.age_60_up.male,0),female:m.reduce((e,s)=>e+s.age_60_up.female,0)}},t=[...m,l];return a.jsx(p,{icon:a.jsx(f,{}),color:"blue",title:`Population Exposure - ${d.hazard_name}`,description:`Population exposure per purok for ${d.hazard_name}`,tableProps:{component:b,passedData:t,allColumns:o,columnRenderers:c,visibleColumns:o.map(e=>e.key),showTotal:!0,tableHeight:"500px"}},`hazard-${g}`)}))]})})})]})}export{ge as default};
