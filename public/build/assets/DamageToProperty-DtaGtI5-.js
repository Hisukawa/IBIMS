import{j as t,L as k,S as m}from"./app-CYjubXcb.js";import{S as D,c as _}from"./AdminLayout--l-KZkcj.js";import C from"./BreadcrumbsHeader-BMzwqHmW.js";import{T as S}from"./TableSection-rm244EG1.js";import T from"./DynamicTable-DWTApLnk.js";import{B as $}from"./BarangayFilterCard-CYR6U4fk.js";import{N as B}from"./NoDataPlaceholder-B-JvJHGh.js";import{c as P}from"./createLucideIcon-zwhh55E_.js";import"./sidebar-BpvzJ5lK.js";import"./button-sAotJoLm.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-UUEsUVC-.js";import"./index-C4Ke6hAv.js";import"./index-BwJ3XWkn.js";import"./floating-ui.react-dom-CBCZEv9t.js";import"./x-Cy6oWex1.js";import"./tooltip-B8uc5q9P.js";import"./nav-user-DbQr6VCO.js";import"./avatar-BU9wZrTi.js";import"./dropdown-menu-Bz-zuVkL.js";import"./check-CgFUlvlz.js";import"./chevron-right-gBhi1ZR3.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-xCAiQ2Jy.js";import"./index-Nkktqz5-.js";import"./DeleteConfirmationModal-Co_8faR_.js";import"./file-text-CJU5yhcd.js";import"./users-round-BtfjTBvk.js";import"./heart-pulse-DDzDHS3k.js";import"./chevron-up-B8LDdSpG.js";import"./breadcrumb-1G_dbrY1.js";import"./card-DS1wI1Fe.js";import"./SelectField-sV6HLf6b.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],O=P("wrench",L);function ue({damagePropertyData:n=[],overallDamagePropertyData:p=[],barangays:d=[],selectedBarangay:l}){const g=[{label:"Dashboard",showOnMobile:!0}],c=!!l,x=!n.length,u=!p.length,h=c&&x||!c&&u,b=e=>{const a=e.target.value;m.get(route("cdrrmo_admin.damageproperty"),a?{barangay_id:a}:{})},y=e=>e?e.replace(/_/g," ").replace(/\w\S*/g,a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()):"—",f=e=>{if(!e)return 0;let a=String(e).trim();const r=/^\(.*\)$/.test(a);if(r&&(a=a.replace(/[()]/g,"")),a=a.replace(/(?:php|₱|p)/gi,""),a=a.replace(/,/g,""),/k$/i.test(a))return parseFloat(a)*1e3*(r?-1:1);const o=a.match(/\d+(\.\d+)?/g);if(!o)return 0;const s=o.reduce((v,w)=>v+parseFloat(w),0);return r?-s:s},i=[{key:"damage_type",label:"Damage Type"},{key:"category",label:"Category"},{key:"description",label:"Description"},{key:"value",label:"Value"},{key:"source",label:"Source"}],j={damage_type:e=>t.jsx("span",{className:"text-gray-800 font-medium",children:y(e.damage_type)}),category:e=>t.jsx("span",{className:"text-gray-800",children:e.category||"—"}),description:e=>t.jsx("span",{className:"text-gray-700",children:e.description||"—"}),value:e=>{const r=f(e.value)>0;return t.jsx("span",{className:`font-semibold ${r?"text-red-600":"text-gray-700 italic"}`,children:e.value||"—"})},source:e=>t.jsx("span",{className:"text-gray-700",children:e.source||"—"})},N=(e,a,r=!1)=>{const o=r?i.map(s=>s.key):i.filter(s=>s.key!=="description").map(s=>s.key);return t.jsx(S,{icon:r?t.jsx(O,{}):t.jsx(_,{}),color:"red",title:e,description:"Breakdown of property damages by category",tableProps:{component:T,passedData:a,allColumns:i,columnRenderers:j,visibleColumns:o,showTotal:!1,tableHeight:"400px"}},e)};return t.jsxs(D,{children:[t.jsx(k,{title:"Damage to Property Dashboard"}),t.jsx(C,{breadcrumbs:g}),t.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:t.jsxs("div",{className:"mx-auto w-full",children:[t.jsx($,{selectedBarangay:l,handleBarangayChange:b,barangays:d}),l?h?t.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:t.jsx(B,{tip:"Use the year selector above to navigate to a year with available data."})}):n.flatMap(e=>e.disasters.map(a=>{var r;return N(`${a.disaster_name} in ${e.barangay_name} (${((r=a.damages[0])==null?void 0:r.year)??"N/A"})`,a.damages,!0)})):t.jsxs("div",{className:"flex flex-col items-center justify-center mt-15 bg-gradient-to-br from-gray-50 to-gray-100 p-12 rounded-3xl shadow-xl border border-gray-200 hover:border-gray-300 transition-all duration-300",children:[t.jsx("img",{src:"/images/chart_error.png",alt:"No data",className:"w-48 h-48 mb-6 animate-bounce"}),t.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-3 text-center",children:"No Data Available"}),t.jsxs("p",{className:"text-gray-700 text-center mb-3 max-w-xl text-base leading-relaxed",children:["To view disaster population impact data, please"," ",t.jsx("span",{className:"font-bold text-blue-600",children:"select a barangay"})," ","from the dropdown above. Only barangays with recorded disaster impact data for the chosen year will display results."]}),t.jsx("p",{className:"text-gray-600 text-center mb-6 max-w-xl text-sm italic leading-relaxed",children:"Ensure the data for the selected barangay has been properly recorded in the system. Once selected, the dashboard will display accurate statistics and affected population information."}),t.jsx("button",{onClick:()=>m.reload(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105 hover:shadow-lg",children:"Refresh Page"})]})]})})]})}export{ue as default};
