import{j as e,L as w,S as m}from"./app-CF2anYLW.js";import{S as _}from"./AdminLayout-DqRVuo6c.js";import C from"./BreadcrumbsHeader-CXo1eRra.js";import{T as k}from"./TableSection-BlClS9E5.js";import T from"./DynamicTable-DS7KqW_5.js";import{B as S}from"./BarangayFilterCard-Bl063sL0.js";import{N as D}from"./NoDataPlaceholder-DfLZkp6e.js";import{c as $}from"./createLucideIcon-Cxg9f19n.js";import"./sidebar-Cr5QZ3iM.js";import"./button-DbXshOlj.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-B4zoqAN3.js";import"./index-Bf8yjpmv.js";import"./index-C7X0pi7N.js";import"./floating-ui.react-dom-Dc5kNYqc.js";import"./x-D6XcRy9r.js";import"./tooltip-DvShnGx_.js";import"./nav-user-jtdfjno4.js";import"./avatar-B6GALvf5.js";import"./dropdown-menu-BuXG5MB1.js";import"./check-Bt_7K55j.js";import"./chevron-right-DzFo2fXP.js";import"./stringFormat-Dx_XIxG1.js";import"./useAppUrl-d-xXNhtW.js";import"./index-B3Ghgs_3.js";import"./DeleteConfirmationModal-QNfOEHBM.js";import"./file-text-CVFlfR9-.js";import"./users-round-Flr4zl_f.js";import"./heart-pulse-BOqLD5Kr.js";import"./chevron-up-C2q-OU4v.js";import"./breadcrumb-B2PyAOv1.js";import"./card-CLn7Z8sF.js";import"./SelectField-67LNCWrD.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M6.376 18.91a6 6 0 0 1 11.249.003",key:"hnjrf2"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}]],O=$("shield-user",A);function ue({disasterImpactsData:l,barangays:p=[],selectedBarangay:i,tip:B=null,queryParams:n}){const x=[{label:"Dashboard",showOnMobile:!0}];n=n||{};const h=!l||l.length===0,u=o=>{const s=o.target.value;m.get(route("cdrrmo_admin.populationimpact"),s?{barangay_id:s}:{})};return e.jsxs(_,{children:[e.jsx(w,{title:"Admin Dashboard"}),e.jsx(C,{breadcrumbs:x}),e.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx(S,{selectedBarangay:i,handleBarangayChange:u,barangays:p}),i?h?e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:e.jsx(D,{tip:"Use the year selector above to navigate to a year with available data."})}):e.jsx(e.Fragment,{children:l.map((o,s)=>{const b=o.disasters.reduce((r,a)=>(r[a.disaster_id]||(r[a.disaster_id]=[]),r[a.disaster_id].push(a),r),{});return Object.entries(b).map(([r,a],L)=>{const d=[{key:"category",label:"Category"},{key:"affected",label:"Affected"},{key:"source",label:"Source"}],g={category:t=>e.jsx("span",{className:"text-gray-700",children:t.category}),affected:t=>e.jsx("span",{className:"font-bold text-blue-600",children:t.value}),source:t=>e.jsx("span",{className:"text-gray-700",children:t.source})},y=a[0].disaster_name,f=a[0].year,c=a.reduce((t,N)=>t+N.value,0),j={disaster_id:null,disaster_name:null,year:null,category:"Total Affected",value:c,source:""},v=[...a,j];return e.jsx(k,{icon:e.jsx(O,{}),color:"green",title:`${y} in ${o.barangay_name} (${f})`,description:`Total affected: ${c}`,tableProps:{component:T,passedData:v,allColumns:d,columnRenderers:g,visibleColumns:d.map(t=>t.key),showTotal:!0,tableHeight:"400px"}},`${s}-${r}`)})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center mt-15 bg-gradient-to-br from-gray-50 to-gray-100 p-12 rounded-3xl shadow-xl border border-gray-200 hover:border-gray-300 transition-all duration-300",children:[e.jsx("img",{src:"/images/chart_error.png",alt:"No data",className:"w-48 h-48 mb-6 animate-bounce"}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-800 mb-3 text-center",children:"No Data Available"}),e.jsxs("p",{className:"text-gray-700 text-center mb-3 max-w-xl text-base leading-relaxed",children:["To view disaster population impact data, please"," ",e.jsx("span",{className:"font-bold text-blue-600",children:"select a barangay"})," ","from the dropdown above. Only barangays with recorded disaster impact data for the chosen year will display results."]}),e.jsx("p",{className:"text-gray-600 text-center mb-6 max-w-xl text-sm italic leading-relaxed",children:"Ensure the data for the selected barangay has been properly recorded in the system. Once selected, the dashboard will display accurate statistics and affected population information."}),e.jsx("button",{onClick:()=>m.reload(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md transition transform hover:scale-105 hover:shadow-lg",children:"Refresh Page"})]})]})})]})}export{ue as default};
