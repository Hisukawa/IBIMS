import{j as e,L as C,S as B}from"./app-DWe79SVw.js";import{S as A}from"./AdminLayout-MiUhH5gI.js";import D from"./BreadcrumbsHeader-CKMUVNAg.js";import{T as f}from"./TableSection-mz-ZhNpp.js";import y from"./DynamicTable-mndcb7uG.js";import{B as H}from"./BarangayFilterCard-COgLVo4A.js";import{N as b}from"./NoDataPlaceholder-UQIFJsg3.js";import{c as x}from"./createLucideIcon-C1unI7xk.js";import"./sidebar-D64om0v6.js";import"./button-Blyd15S-.js";import"./clsx-B-dksMZM.js";import"./utils-CkmPJWYF.js";import"./input-BIFqtZBq.js";import"./index-BkGB5r-X.js";import"./index-B5j5lF58.js";import"./floating-ui.react-dom-9LSw_R86.js";import"./x-BmhvkeEz.js";import"./tooltip-CVBW4YM8.js";import"./nav-user-B17zd2kb.js";import"./avatar-DDBB_fVh.js";import"./dropdown-menu-C2PbzM1T.js";import"./check-DjBcwgbk.js";import"./chevron-right-CFxQSv01.js";import"./useAppUrl-DaR6sn03.js";import"./index-B3qx4Qz7.js";import"./DeleteConfirmationModal-BULvc1mW.js";import"./file-text-DLbSvjme.js";import"./users-round-DEuhU6Au.js";import"./heart-pulse-B3tbrvPE.js";import"./chevron-up-CusxxmNe.js";import"./breadcrumb-C69xzygQ.js";import"./card--GxQnBqp.js";import"./SelectField-pqCYm0lk.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],O=x("activity",L);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],z=x("zap",w);function _e({disasterEffectsData:n,overallDisasterEffectsData:c=[],barangays:h=[],selectedBarangay:m,tip:M=null,queryParams:u}){const _=[{label:"Dashboard",showOnMobile:!0}];u=u||{};const g=!!m,j=!n||n.length===0,v=!c||c.length===0,N=r=>{const o=r.target.value;B.get(route("cdrrmo_admin.effectimpact"),o?{barangay_id:o}:{})};return e.jsxs(A,{children:[e.jsx(C,{title:"Disaster Effect & Impact Dashboard"}),e.jsx(D,{breadcrumbs:_}),e.jsx("div",{className:"pt-8 pb-2 min-h-screen bg-gray-50",children:e.jsxs("div",{className:"mx-auto w-full",children:[e.jsx(H,{selectedBarangay:m,handleBarangayChange:N,barangays:h}),g?j?e.jsx(b,{tip:"No disaster effect and impact data available for the selected barangay."}):n.map((r,o)=>{const i=r.disasters.reduce((s,a)=>(s[a.disaster_id]||(s[a.disaster_id]=[]),s[a.disaster_id].push(a),s),{});return Object.entries(i).map(([s,a],p)=>{const t=[{key:"effect_type",label:"Effect Type"},{key:"value",label:"Value"},{key:"source",label:"Source"}],T={effect_type:l=>e.jsx("span",{className:"text-gray-700",children:l.effect_type}),value:l=>e.jsx("span",{className:"font-bold text-blue-600",children:l.value}),source:l=>e.jsx("span",{className:"text-gray-700",children:l.source})},$=a[0].disaster_name,k=a[0].year,d=a.reduce((l,S)=>l+S.value,0),I={disaster_id:null,disaster_name:null,year:null,effect_type:"Total Impact Value",value:d,source:""},V=[...a,I];return e.jsx(f,{icon:e.jsx(z,{}),color:"purple",title:`${$} in ${r.barangay_name} (${k})`,description:`Total impact value: ${d}`,tableProps:{component:y,passedData:V,allColumns:t,columnRenderers:T,visibleColumns:t.map(l=>l.key),showTotal:!0,tableHeight:"400px"}},`${o}-${s}`)})}):v?e.jsx("div",{className:"w-full px-2 sm:px-4 lg:px-6",children:e.jsx(b,{tip:"No overall disaster impact data available for the selected year."})}):c.map((r,o)=>{var p;const i=[{key:"effect_type",label:"Effect Type"},{key:"value",label:"Value"},{key:"source",label:"Source"}],s={effect_type:t=>e.jsx("span",{className:`${t.effect_type==="Total Impact Value"?"font-bold text-gray-900":"text-gray-700"}`,children:t.effect_type}),value:t=>e.jsx("span",{className:`${t.effect_type==="Total Impact Value"?"font-bold text-blue-700":"text-blue-600"}`,children:t.value}),source:t=>e.jsx("span",{className:"text-gray-700",children:t.source||"â€”"})},a=(p=r.effects.find(t=>t.effect_type==="Total Impact Value"))==null?void 0:p.value;return e.jsx(f,{icon:e.jsx(O,{}),color:"blue",title:`${r.disaster_name} (Overall Summary)`,description:`Total impact value across all barangays: ${a}`,tableProps:{component:y,passedData:r.effects,allColumns:i,columnRenderers:s,visibleColumns:i.map(t=>t.key),showTotal:!0,tableHeight:"400px"}},o)})]})})]})}export{_e as default};
